[
  {
    "text": "# xinjs-ui\n\n[ui.xinjs.net live demo](https://ui.xinjs.net) [xinjs](https://xinjs.net) [discord](https://discord.gg/ramJ9rgky5) [github](https://github.com/tonioloewald/xinjs-ui#readme) [npm](https://www.npmjs.com/package/xinjs-ui) <size-break min-width=\"500\"><img alt=\"bundlejs\" src=\"https://deno.bundlejs.com/?q=xinjs-ui&badge=\"></size-break>\n\nCopyright ©2023 Tonio Loewald\n\n## the xinjs ui library\n\nIn general, `xinjs` strives to work _with_ the browser rather than trying to _replace_ it.\n\nIn a similar vein, `xinjs-ui` comprises a collection of [web-components](https://developer.mozilla.org/en-US/docs/Web/API/Web_components)\nwith the goal of augmenting what _already_ works well, and the components are intended be interoperable as\nsimilar as possible to things that you already use, such as `<input>` or `<select>` elements.\nE.g. where appropriate, the `value` of an element is its malleable `state`, and when this changes,\nthe element emits a `change` event.\n\nSimilarly, the xinjs base `Component` class and the components in this collection stive to\nbe as similar in operation as possible to DOM elements as possible. E.g. binary attributes\nwork as expected. Adding the `hidden` attribute makes them disappear.\nIntinsic properties of components will default to `null` rather than `undefined`.\n\nSimilarly, because web-components are highly interoperable, there's no reason to reinvent\nwheels. In particular, this library won't try to replace existing, excellent libraries\nsuch as [shoelace.style](https://shoelace.style/) or wrap perfectly functional HTML\nelements, like the venerable `<input>` or `<form>` elements that are already capable\nand accessible.\n\nThe goal here is to provide useful components and other utilities that add to what's built into HTML5 and CSS3.\n\n## custom elements\n\nThe simplest way to use these elements is to simply import the element and then either\nuse HTML or the `ElementCreator` function exported.\n\nE.g. to use the markdown viewer:\n\n```\nimport { markdownViewer } from 'xinjs-ui'\ndocument.body.append(markdownViewer('# hello world\\nthis is a test'))\n```\n\n```js\nconst { markdownViewer } = xinjsui\n\npreview.append(\n  markdownViewer(`\n## hello world\nhere is some markdown\n`)\n)\n```\n\nAssuming you import the module somewhere, the HTML will work as well.\n\n```\n<markdown-viewer>\n## hello world\nhere is some markdown\n</markdown-viewer>\n```\n\nThe big difference with using the `markdownViewer()` function is that the `xinjs` `Component`\nclass will automatically pick a new tag if the expected tag is taken (e.g. by a previously\ndefined custom-element from another library). `markdownViewer()` will create an element of\nthe correct type.\n\nThe other thing is that `xinjs` `ElementCreator` functions are convenient and composable,\nallowing you to build DOM elements with less code than pretty much any other option, including\nJSX, TSX, or HTML.\n",
    "filename": "README.md",
    "path": "README.md"
  },
  {
    "text": "# `<b-3d>`\n\nA [babylonjs](https://www.babylonjs.com/) wrapper.\n\nA `<b-3d>` element is initialized with an `engine`, `canvas`, `scene`, and an update-loop.\n\nYou can access the `scene` and `engine` properties. You can also assign `sceneCreated`\nand `update` callbacks that will be executed when the scene is first initialized and\nbefore each update, respectively. (See the example, it does both.)\n\nBoth `sceneCreated` and `update` may be `async`. The component will `await` `sceneCreated`\nbefore starting the renderLoop, but `update` is simply passed to babylon, so be careful.\n\nBy default, this component loads `babylon.js` from the [babylonjs CDN](https://doc.babylonjs.com/setup/frameworkPackages/CDN),\nbut if `BABYLON` is already defined (e.g. if you've bundled it) then it will use that instead.\n\nIf you need additional libraries, e.g. `https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js` for loading models\nsuch as `gltf` and `glb` files, you should load those in `sceneCreated`.\n\n```js\nconst { b3d } = xinjsui\n\npreview.append(b3d({\n  sceneCreated(element, BABYLON) {\n    const camera = new BABYLON.ArcRotateCamera(\n      'camera',\n      -Math.PI / 2,\n      Math.PI / 2.5,\n      3,\n      new BABYLON.Vector3(0, 0, 0)\n    )\n    camera.attachControl(element.parts.canvas, true)\n\n    new BABYLON.HemisphericLight('light', new BABYLON.Vector3(0.25, 1, 0.75))\n    BABYLON.MeshBuilder.CreateBox('box', {})\n  },\n  update(element) {\n    element.scene.getMeshByName('box').rotation.y += 0.005\n  }\n}))\n```\n```css\n.preview b-3d {\n  width: 100%;\n  height: 100%;\n}\n```",
    "filename": "babylon-3d.ts",
    "path": "src/babylon-3d.ts"
  },
  {
    "text": "# `<bodymovin-player>`\n\nA [lottie](https://airbnb.io/lottie/#/web) (a.k.a. **bodymovin**) player.\n\nIt's designed to work like an `<img>` element (just set its `src` attribute).\n\n```js\nconst { xinProxy } = xinjs\nconst { icons } = xinjsui\nconst { div, label, input, select, option, span } = xinjs.elements\n\nconst rocket = preview.querySelector('bodymovin-player')\npreview.append(\n  div(\n    { class: 'panel' },\n    label(\n      'speed',\n      input({ type: 'range', min: -1, max: 1, step: 0.1, value: 0, onInput(event) {\n        const speed = Math.pow(5, Number(event.target.value))\n        rocket.animation.setSpeed(speed)\n        event.target.nextSibling.textContent = (speed * 100).toFixed(0) + '%'\n      } }),\n      span('100%', {style: { textAlign: 'right', width: '40px'}})\n    ),\n    label(\n      'direction',\n      select(\n        option('Forwards', {value: 1, selected: true}),\n        option('Backwards', {value: -1}),\n        {\n          onChange(event) {\n            rocket.animation.setDirection(event.target.value)\n          }\n        }\n      ),\n      icons.chevronDown(),\n    )\n  )\n)\n```\n```html\n<bodymovin-player\n  style=\"max-height: calc(100% - 40px); width: 100%\"\n  src=\"https://raw.githubusercontent.com/tonioloewald/xinjs-ui/main/demo/88140-rocket-livetrade.json\"\n></bodymovin-player>\n<div style=\"height: 40px; line-height: 40px\">\n  Animation by <a target=\"_blank\" href=\"https://lottiefiles.com/dvskjbicfc\">chiến lê hồng</a>\n</div>\n```\n```css\n.preview {\n  padding: var(--spacing);\n  text-align: center;\n}\n\n.preview .panel {\n  position: absolute;\n  left: 10px;\n  bottom: 10px;\n  padding: 10px;\n  border-radius: 5px;\n  background: white;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.25);\n  display: flex;\n  flex-direction: column;\n}\n```\n\nYou can also directly set its `json` property to the content of a `lottie.json` file.\n\nAnd of course just access the element's `animation` property to [use the bodymovin API](https://airbnb.io/lottie/#/web).\n\nAlso see the [documentation for advanced interactions](https://lottiefiles.github.io/lottie-docs/advanced_interactions/)",
    "filename": "bodymovin-player.ts",
    "path": "src/bodymovin-player.ts"
  },
  {
    "text": "# `<code-editor>`\n\nAn [ACE Editor](https://ace.c9.io/) wrapper.\n\nSometimes, it's nice to be able to just toss a code-editor in a web-page.\n\n`<code-editor>`'s `value` is the code it contains. Its `mode` attribute sets the language, and you can further configure\nthe ACE editor instance via its `options` property.\n\n```html\n<code-editor style=\"width: 100%; height: 100%\" mode=\"css\">\nbody {\n  box-sizing: border-box;\n}\n</code-editor>\n```",
    "filename": "code-editor.ts",
    "path": "src/code-editor.ts"
  },
  {
    "text": "# `<data-table>`\n\nA virtual data-table, configurable via a `columns` array (which will automatically be generated if not provided),\nthat displays gigantic tables with fixed headers (and live column-resizing) using a minimum of resources and cpu.\n\n```js\nconst { dataTable } = xinjsui\nconst { input } = xinjs.elements\n\nconst emojiRequest = await fetch('https://raw.githubusercontent.com/tonioloewald/emoji-metadata/master/emoji-metadata.json')\nconst emojiData = await emojiRequest.json()\n\nconst columns = [\n  {\n    name: \"emoji\",\n    prop: \"chars\",\n    align: \"center\",\n    width: 80\n  },\n  {\n    prop: \"name\",\n    width: 300,\n    // custom cell using xinjs bindings to make the field editable\n    dataCell() {\n      return input({\n        class: 'td',\n        bindValue: '^.name',\n        title: 'name',\n      })\n    },\n  },\n  {\n    prop: \"category\",\n    width: 150\n  },\n  {\n    prop: \"subcategory\",\n    width: 150\n  },\n]\n\npreview.append(dataTable({ array: emojiData, columns }))\n```\n```css\n.preview input.td {\n  margin: 0;\n  border-radius: 0;\n  box-shadow: none !important;\n  background: transparent;\n}\n\n.preview data-table {\n  height: 100%;\n}\n```\n\nYou can set the `<data-table>`'s `array`, `columns`, and `filter` properties directly, or set its `value` to:\n\n```\n{ \n  array: any[], \n  columns: ColumnOptions[] | null, \n  filter?: ArrayFilter \n}\n```\n\nIf you set the `<data-table>`'s `rowHeight` to `0` it will render all its elements (i.e. not be virtual). This is\nuseful for smaller tables, or tables with variable row-heights.",
    "filename": "data-table.ts",
    "path": "src/data-table.ts"
  },
  {
    "text": "# `<filter-builder>`\n\nAutomatically creates `ArrayFilter` functions `(a: any[]) => any[]` based on the query you build using its\nmacOS Finder-inspired interface, using an easily customizable / extensible collection of `Filter` objects.\n\n```js\nconst { dataTable, filterBuilder, availableFilters } = xinjsui\n\nconst sourceWords = ['acorn', 'bubblegum', 'copper', 'daisy', 'ellipse', 'fabulous', 'gerund', 'hopscotch', 'idiom', 'joke']\nfunction randomWords () {\n  let numWords = Math.random() * 4\n  const words = []\n  while (numWords > 0) {\n    numWords -= 1\n    words.push(sourceWords[Math.floor(Math.random() * 10)])\n  }\n  return words\n}\n\nconst array = []\nfor(let i = 0; i < 1000; i++) {\n  array.push({\n    date: new Date(Math.random() * Date.now()).toISOString().split('T')[0],\n    isLucky: Math.random() < 0.1,\n    number: Math.floor(Math.random() * 200 - 100),\n    string: randomWords().join(' '),\n  })\n}\n\nconst columns = [\n  {\n    prop: 'date',\n    width: 120\n  },\n  {\n    prop: 'isLucky',\n    type: 'boolean',\n    width: 100\n  },\n  {\n    prop: 'number',\n    align: 'right',\n    width: 100\n  },\n  {\n    prop: 'string',\n    width: 300\n  },\n]\n\nconst table = dataTable({ array, columns })\nconst { contains, equals, after, isTrue, isFalse } = availableFilters\nconst filter = filterBuilder({\n  filters: { contains, equals, after, isTrue, isFalse },\n  fields: columns,\n  onChange(event) {\n    table.filter = filter.filter\n  }\n})\npreview.append(filter, table)\n```\n```css\n.preview {\n  display: flex;\n  flex-direction: column;\n}\n\n.preview data-table {\n  flex: 1 1 auto;\n}\n```\n\n## availableFilters\n\n`<filter-builder>` has a default set of `FilterMaker` objects which it uses to construct filter function.\nIn the example above, the default collection of filters is reduced to `contains`, `equals`, `after`, and `isTrue`.\n\nThe full collection includes:\n\n- **contains** * looks for fields containing a string (ignoring case)\n- **equals** * looks for fields containing equivalent values (ignoring case)\n- **after** * looks for fields with a date after a provided value\n- **greaterThan** * looks for fields with a value greater than a provided value\n- **truthy** * looks for fields that are true / non-zero / non-empty\n- **true** looks for fields that are `true`\n- **false** looks for fields that are `false`\n\n**Note**: the filters marked with an * have negative version (e.g. does not contain).\n\n```\ntype ObjectTest (obj: any) => boolean\n\ninterface FilterMaker {\n  caption: string                                 // describes the test condition\n  negative?: string                               // describes the negative test condition\n  needsValue?: boolean                            // if false, the filterMaker doesn't need a needle value\n  filterMaker(needle: any) => ObjectTest          // builds an ObjectTest\n}\n```",
    "filename": "filter-builder.ts",
    "path": "src/filter-builder.ts"
  },
  {
    "text": "# icons & `<svg-icon>`\n\nA library that provides `ElementCreator` functions that produce SVG icons. It leverages `xinjs`'s\n`svgElements` proxy.\n\nThese icons are completely unstyled and can be colored using the css `fill` property. This will\nprobably be broken out as a standalone library to allow the use of whatever icons you like\n(its source data is currently generated from an [icomoon](https://icomoon.com/app)\n`selection.json` file, but could just as easily be generated from a directory full of SVGs).\n\n## icons\n\n`icons` is simply a proxy that generates an `ElementCreator` for a given icon on demand,\ne.g. `icons.chevronDown()` produces an `<svg>` element containing a downward-pointing chevron\nicon with the class `icon-chevron-down`.\n\n```js\nconst { icons, svgIcon } = xinjsui\nconst { div } = xinjs.elements\n\npreview.append(...Object.keys(icons).sort().map(iconName => div(\n  { class: 'tile' },\n  svgIcon({icon: iconName}),\n  div(iconName)\n)))\n```\n```css\n.preview {\n  display: flex;\n  flex-wrap: wrap;\n  padding: var(--spacing);\n  gap: var(--spacing);\n  overflow: hidden scroll !important;\n}\n\n.preview svg {\n  fill: var(--text-color);\n}\n\n.preview .tile {\n  display: inline-block;\n  width: 160px;\n  text-align: center;\n  cursor: pointer;\n  background: #fff8;\n  padding: 10px;\n  border-radius: 5px;\n}\n\n.preview .tile:hover {\n  --text-color: var(--brand-color);\n}\n\n.preview .tile > div {\n  font-family: Menlo, Monaco, monospace;\n  whitespace: no-wrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  line-height: 1.5;\n}\n```\n\n## `<svg-icon>`\n\n`<svg-icon>` is a simple component that lets you embed icons as HTML. Check the CSS tab to see\nhow it's styled.\n\n```html\n<svg-icon class=\"demo-2\" icon=\"game\"></svg-icon>\n```\n```css\nsvg-icon.demo-2 > svg {\n  height: 96px;\n}\n```\n\n## Why?\n\nThe motivation behind this is to avoid dealing with tooling issues that inevitably result from\nintegrating custom icon fonts or stylesheets needed by code libraries (and an icon-font also needs\na style-sheet. Importing code is simply easier (and as a bonus, more compact and flexible, and there's\nno question as to when the stuff is available).\n\nThese icons are mainly sourced from [feather](https://github.com/feathericons/feather), but\nall the icons have been processed to have integer coordinates in a `viewBox` typically scaled to 1024  &times; 1024.",
    "filename": "icons.ts",
    "path": "src/icons.ts"
  },
  {
    "text": "# `<live-example>`\n\n`<live-example>` makes it easy to insert interactive code examples in a web page.\nIt's effectively a super lightweight fiddle based on the `b8rjs`'s `fiddle` component\n(which I miss dearly). (You're probably looking at it right now.)\n\nYou can simply wrap it around a sequence of code blocks in the DOM with the\nlanguages (js, html, css) as annotations or you can directly set the `js`, `html`,\nand `css` properties.\n\n```js\n// this code executes in an async function body\n// it has xinjs, xinjsui, and preview (the preview div) available as local variables\nconst { div } = xinjs.elements\npreview.append(div({class: 'example'}, 'fiddle de dee!'))\npreview.append('Try editing some code and hitting refresh…')\n```\n```html\n<h2>Example</h2>\n```\n```css\n.preview {\n  padding: 0 var(--spacing);\n}\n\n.example {\n  animation: throb ease-in-out 1s infinite alternate;\n}\n\n@keyframes throb {\n  from { color: blue }\n  to { color: red }\n}\n```\n\nA `<live-example>` can be given a `context` object {[key: string]: any}, which is the\nset of values available in the javascript's execution context (it is wrapped in an\nasync function and passed those values). By default, that context comprises `preview`\n(the `<div>` in which the example is rendered), `xinjs` (`* from xinjs`),\nand `xinjsui` (`* from xinjsui`).\n\nThe `LiveExample` class provides the static `insertExamples(element: HTMLElement)`\nfunction that will replace any sequence of\n`pre code[class=\"language-html\"],pre code[class=\"language-js\"],pre code[class=\"language-css\"]`\nelements with a `<live-example>` instance.",
    "filename": "live-example.ts",
    "path": "src/live-example.ts"
  },
  {
    "text": "# makeSorter\n\nI'm always confusing myself when writing sort functions, so I wrote `makeSorter()`. It's\ninsanely simple and just works™. It makes writing an array sort callback for anything\nother than an array of numbers or strings easier.\n\nTo create a sort callback that sorts by propA then propB (if propA is tied):\n```\nconst sorter = makeSorter(\n  obj => [obj.propA, obj.propB]\n)\n```\n\nAs above, but sort descending:\n```\nconst sorter = makeSorter(\n  obj => [obj.propA, obj.propB],\n  false\n)\n```\n\nAs above but propA is sorted ascending, propB descending\n```\nconst sorter = makeSorter(\n  obj => [obj.propA, obj.propB],\n  [true, false]\n)\n```\n\nInteractive example:\n\n```js\nconst { select, option, div, span, ul, li } = xinjs.elements\nconst { icons, makeSorter } = xinjsui\n\nconst people = [\n  { first: 'Frasier', last: 'Crane', age: 38 },\n  { first: 'Lilith', last: 'Crane', age: 37 },\n  { first: 'Rebecca', last: 'Howe', age: 35 },\n  { first: 'Woody', last: 'Boyd', age: 25 },\n  { first: 'Sam', last: 'Malone', age: 40 },\n  { first: 'Norm', last: 'Peterson', age: 38 },\n]\n\nconst sorters = {\n  firstSort: makeSorter(person => [person.first]),\n  firstDescSort: makeSorter(person => [person.first], false),\n  nameSort: makeSorter(person => [person.last, person.first]),\n  ageFirst: makeSorter(person => [-person.age, person.last]),\n  ageLast: makeSorter(person => [person.age, person.first], [true, false]),\n}\n\nfunction person({first, last, age}) {\n  return li(`${first} ${last}, ${age}`)\n}\n\nconst list = ul()\nsortPicker = select(\n  option('Sort by first', {value: 'firstSort'}),\n  option('Sort by first (desc)', {value: 'firstDescSort'}),\n  option('Sort by last, first', {value: 'nameSort'}),\n  option('Sort by age (desc), first', {value: 'ageFirst'}),\n  option('Sort by age, last (desc)', {value: 'ageLast'}),\n  {\n    onChange: render,\n    value: 'nameSort'\n  },\n)\n\nfunction render () {\n  list.textContent = ''\n  list.append(...people.sort(sorters[sortPicker.value]).map(person))\n}\n\npreview.append(\n  div(\n    sortPicker,\n    icons.chevronDown()\n  ),\n  list\n)\n\nrender()\n```\n```css\n.preview {\n  padding: var(--spacing);\n}\n\n.preview div {\n  position: absolute;\n  top: var(--spacing);\n  right: var(--spacing);\n}\n```",
    "filename": "make-sorter.ts",
    "path": "src/make-sorter.ts"
  },
  {
    "text": "# `<map-box>`\n\nA [mapboxgl](https://docs.mapbox.com/mapbox-gl-js/api/) wrapper.\n\n```html\n<!-- please don't abuse my mapbox token -->\n<map-box\n  style=\"width: 100%; height: 100%\"\n  coords=\"14.0093606,120.995083,17\"\n  token=\"pk.eyJ1IjoicG9kcGVyc29uIiwiYSI6ImNqc2JlbWU0bjA1ZmY0YW5ycHZod3VhbWcifQ.arvqfpOqMgFYkKgQ35UScA\"\n  map-style=\"mapbox://styles/mapbox/satellite-v9\"\n></map-box>\n```\n\nThere's no need to learn new APIs or write wrappers, just access the element's `map` property\nand [use the standard mapbox APIs directly](https://docs.mapbox.com/).",
    "filename": "mapbox.ts",
    "path": "src/mapbox.ts"
  },
  {
    "text": "# `<markdown-viewer>`\n\nRender [markdown](https://www.markdownguide.org/) anywhere, either using the `src` attribute to load\nthe file asynchronously, or just put the text inside it.\n\n`<markdown-viewer>` renders markdown using [marked](https://www.npmjs.com/package/marked).\n\n```\n<markdown-viewer src=\"/path/to/file.md\">\n```\n\nYou can wrap markdown source per the following example:\n\n```html\n<markdown-viewer>\n## hello\nworld\n</markdown-viewer>\n```\n```css\nmarkdown-viewer {\n  display: block;\n  padding: var(--spacing);\n}\n```\n\nOr, just set the element's `value` and it will render it for you. You can try\nthis in the console, e.g.\n\n```\n$('.preview markdown-viewer').value = 'testing\\n\\n## this is a test'\n```",
    "filename": "markdown-viewer.ts",
    "path": "src/markdown-viewer.ts"
  },
  {
    "text": "# `<rich-text>`\n\nA simple and easily extensible `document.execCommand` WYSIWYG editor with some conveniences.\n\nBy default, it treats its initial contents as its document, but you can also set (and get)\nits `value`.\n\n```html\n<rich-text widgets=\"minimal\">\n<h3>Heading</h3>\n<p>And some <b>text</b></p>\n</rich-text>\n```\n\n`<rich-text>` elements have a `toolbar` slot (actually a xin-slot because it doesn't use\nthe shadowDOM).\n\nIf you set the `widgets` attribute to `default` or `minimal` you will get a toolbar\nfor free. Or you can add your own custom widgets.\n\nA number of convenience functions are available, including:\n\n- `commandButton(title: string, command: string, iconClass: string)`\n- `blockStyle(options: Array<{caption: string, tagType: string}>)`\n- `spacer(width = '10px')`\n- `elastic(width = '10px')`\n\nThese each create a toolbar widget. A `blockStyle`-generated `<select>` element will\nautomatically have its value changed based on the current selection.\n\nA `<rich-text>` element also has `selectedText` and `selectedBlocks` properties, allowing\nyou to easily perform operations on text selections, and a `selectionChange` callback (which\nsimply passes through document `selectionchange` events, but also passes a reference to\nthe `<rich-text>` component).",
    "filename": "rich-text.ts",
    "path": "src/rich-text.ts"
  },
  {
    "text": "# `<side-nav>`\n\nThe default layout for iOS / iPadOS apps is to hide the sidebar when displaying content on small\nscreens, and display the sidebar when space is available (with the user able to explicitly hide\nthe sidebar if so desired). `<side-nav>` provides this functionality.\n\n`<side-nav>` is used to handle the layout of the documentation tab panel.",
    "filename": "side-nav.ts",
    "path": "src/side-nav.ts"
  },
  {
    "text": "# `<size-break>`\n\nWhile we wait for enough browsers to implement [container-queries](https://www.w3.org/TR/css-contain-3/),\nand in any event when you simply want to do different things at different sizes (e.g. in the project I'm\nworking on right now, a row of buttons turns into a menu at narrow widths) there's `<size-break>`.\n\nNote that the sizes referred to are of the `<size-break>`'s `.offsetParent`, and it watches for\nthe window's `resize` events and its own (via `ResizeObserver`).\n\n```js\nconst { trackDrag } = xinjsui\n\nconst container = preview.querySelector('.container')\nconst sizer = preview.querySelector('.sizer')\n\nfunction resize(event) {\n  const w = container.offsetWidth\n  const h = container.offsetHeight\n  trackDrag(event, (dx, dy, event) => {\n    container.style.width = (w + dx) + 'px'\n    container.style.height = (h + dy) + 'px'\n    return event.type === 'mouseup'\n  }, 'nwse-resize')\n}\n\nsizer.addEventListener('mousedown', resize, 'nwse-resize')\nsizer.addEventListener('touchstart', resize, 'nwse-resize')\n```\n```html\n<div class=\"container\">\n  <size-break min-width=\"150\" min-height=\"80\">\n    <h1>BIG!</h1>\n    <i slot=\"small\">little</i>\n  </size-break>\n  <div class=\"sizer\"></div>\n</div>\n```\n```css\n.preview {\n  touch-action: none;\n}\n\n.preview size-break {\n  width: 100%;\n  height: 100%;\n  background: #fff8;\n  border: 1px solid #aaa;\n}\n\n.preview size-break * {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n}\n\n.preview .container {\n  position: relative;\n  min-width: 100px;\n  min-height: 40px;\n  max-height: 200px;\n  width: 400px;\n  height: 100px;\n}\n\n.preview .sizer {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background: #0003;\n  bottom: 0;\n  right: 0;\n  cursor: nwse-resize;\n}\n```\n\n`<size-break>` supports both `min-width` and/or `min-height`, and you can of course target only one\nof the slots if you like. The demo site uses them to hide the [bundlejs](https://bundlejs.com/) badge when\nspace is tight.",
    "filename": "size-break.ts",
    "path": "src/size-break.ts"
  },
  {
    "text": "# `<tab-selector>`\n\n`<tab-selector>` creates a `tabpanel` for its children, creating a `tab` for each based on its\n`name` attribute.\n\n```js\n[...preview.querySelectorAll('div[name]')].forEach(div => {\n  div.style.color = `hsl(${(Math.random() * 360).toFixed(0)} 50% 50%)`\n})\n\nconst { div, button } = xinjs.elements\nconst tabSelector = preview.querySelector('tab-selector')\n\nlet bodycount = 0\npreview.querySelector('.add').addEventListener('click', () => {\n  const name = `new tab ${++bodycount}`\n  const body = div(\n    {name}, \n    name,\n    button('Remove Me', { onClick() { tabSelector.removeTabBody(body) }})\n  )\n  tabSelector.addTabBody(body, true)\n})\n```\n```html\n<tab-selector>\n  <div name=\"first\">first body</div>\n  <div name=\"second\">second body</div>\n  <div name=\"third\">third body</div>\n  <button class=\"add\" slot=\"after-tabs\">\n    <span class=\"icon-plus\"></span>\n  </button>\n</tab-selector>\n```\n```css\ntab-selector {\n    height: 100%;\n  }\n  \n  div[name] {\n    padding: 20px;\n    text-align: center;\n    height: 100%;\n    font-size: 200%;\n  }\n```\n\n\nThe `<tab-selector>`s `value` is the index of its active body.\n\nA `<tab-selector>` has `addTabBody(body: HTMLElement, select?: boolean)` and \n`removeTabBody(body: number | HTMLElement)` methods for updating its content.\n\nIf you want",
    "filename": "tab-selector.ts",
    "path": "src/tab-selector.ts"
  },
  {
    "text": "# trackDrag\n\nSometimes you want to track a mouse-drag or touch-drag operation without messing around.\nThis is how the resizeable columns in `<data-table>` work.\n\nJust call `trackDrag(event, (dx, dy, event) => { ... })` and you'll get updates on corresponding events until\nyou return `true` from the event-handler (or, in the case of `touch` events, the last `touch` ends).\nFor mouse events, a \"tracker\" element is thrown up in front of everything for the event.\n\n```html\n<p>\n  Try dragging the squares…<br>\n  (You can drag them separately with multi-touch!)\n</p>\n<div class=\"draggable\" style=\"top: 20px; left: 40px; background: #f008\"></div>\n<div class=\"draggable\" style=\"left: 40%; bottom: 30%; background: #0f08\"></div>\n<div class=\"draggable\" style=\"bottom: 30px; right: 10px; background: #00f8\"></div>\n```\n```css\n.preview {\n  touch-action: none;\n}\n\n.draggable {\n  content: ' ';\n  position: absolute;\n  width: 50px;\n  height: 50px;\n  cursor: move;\n}\n\n.preview p {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n}\n```\n```js\nconst { trackDrag } = xinjsui\n\nfunction dragItem(event) {\n  const draggable = event.target\n  if (draggable.classList.contains('draggable')) {\n    const x = draggable.offsetLeft\n    const y = draggable.offsetTop\n    trackDrag(event, (dx, dy, event) => {\n      draggable.style.left = (x + dx) + 'px'\n      draggable.style.top = (y + dy) + 'px'\n      draggable.style.bottom = 'auto'\n      draggable.style.right = 'auto'\n      return event.type === 'mouseup'\n    })\n  }\n}\n\npreview.addEventListener('mousedown', dragItem )\npreview.addEventListener('touchstart', dragItem, { passive: true } )\n```\n\nFor `touch` events, `dx` and `dy` are based on tracking `event.changedTouches[0]` which\nis almost certainly what you want.\n\nTo handle multi-touch gestures you will need to track the touches yourself.",
    "filename": "track-drag.ts",
    "path": "src/track-drag.ts"
  },
  {
    "text": "# scriptTag & styleSheet\n\n## scriptTag\n\nIf you need to load an old school (cjs) javascript or css library via cdn then use these two functions.\n\n`xinjs-ui` uses this library to implement the `<code-editor>`, `<bodymovin-player>`, and `<map-box>`\nelements.\n\n`scriptTag()` and `styleSheet()` return promises that resolve `globalThis` when the module in question\nhas loaded and otherwise behave as much like `import()` as possible.\n\nUsing `scriptTag`:\n\n```html\n<!-- inline styles needed because chart.js overrides stylesheet -->\n<canvas style=\"height: 100%; width: 100%\"></canvas>\n```\n```js\nconst { scriptTag } = xinjsui\n\n// Note that the current version of Chart.js is an ES6 module so you could just use `import()` instead\nconst { Chart } = await scriptTag('https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js')\nconst data = {\n  labels: ['first', 'second', 'third'],\n  datasets: [\n    {\n      label: 'amazingness',\n      backgroundColor: '#fff4',\n      borderColor: '#f008',\n      borderWidth: 2,\n      data: [21, 27, 57]\n    }\n  ]\n}\nconst options = {\n  scales: {\n    yAxes:[{\n      stacked:true,\n      gridLines: {\n        display:true,\n        color: '#00f2'\n      }\n    }],\n    xAxes:[{\n      gridLines: {\n        display:false\n      }\n    }]\n  }\n}\n\nChart.Bar(preview.querySelector('canvas'), {data, options})\n```\n\nNote that `scriptTag` will resolve `globalThis` so it behaves as much like async `import()`\nas possible.\n\nAs an aside:\n\n`<bodymovin-player>` is implemented in such a way that if you've preloaded the module\n(e.g. via a script tag or packaging) it won't load it again, which affords offline\nuse.\n\nThere's no point for `<map-box>` since it won't work without connectivity anyway.\n\n## styleSheet\n\nstyleSheet creates a `<link>` tag for a specified css file.\n\nUsing `styleSheet`:\n\n    styleSheet('../path/to/style.css')\n\nThis is awaitable, if you care. The stylesheet `<link>` will only be inserted _once_.",
    "filename": "via-tag.ts",
    "path": "src/via-tag.ts"
  }
]
