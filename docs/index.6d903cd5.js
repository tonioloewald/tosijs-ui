let e;function t(e){return e&&e.__esModule?e.default:e}function n(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}function i(e,t){return Object.keys(t).forEach(function(n){"default"===n||"__esModule"===n||e.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),e}var r={};n(r,"settings",()=>s),n(r,"xinPath",()=>p),n(r,"xinValue",()=>f),n(r,"getListItem",()=>v),n(r,"observerShouldBeRemoved",()=>y),n(r,"unobserve",()=>B),n(r,"touch",()=>E),n(r,"xin",()=>J),n(r,"observe",()=>X),n(r,"bind",()=>en),n(r,"on",()=>es),n(r,"debounce",()=>ep),n(r,"throttle",()=>ef),n(r,"bindings",()=>ev),n(r,"MoreMath",()=>ew),n(r,"Color",()=>eE),n(r,"elements",()=>e$),n(r,"svgElements",()=>ej),n(r,"mathML",()=>eT),n(r,"css",()=>eM),n(r,"initVars",()=>eO),n(r,"darkMode",()=>eP),n(r,"vars",()=>eI),n(r,"varDefault",()=>eq),n(r,"Component",()=>eV),n(r,"hotReload",()=>eU),n(r,"xinProxy",()=>eQ);const s={debug:!1,perf:!1};function a(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(a);let t={};for(let n in e){let i=e[n];null!=e&&"object"==typeof e?t[n]=a(i):t[n]=i}return t}const o="-xin-data",l=`.${o}`,u="-xin-event",c=`.${u}`,h=Symbol("xin-path"),d=Symbol("xin-value"),p=e=>e[h];function f(e){return"object"==typeof e&&null!==e&&e[d]||e}const m=new WeakMap,g=new WeakMap,b=e=>{let t=e.cloneNode();if(t instanceof HTMLElement){let n=g.get(e),i=m.get(e);null!=n&&g.set(t,a(n)),null!=i&&m.set(t,a(i))}for(let n of e instanceof HTMLTemplateElement?e.content.childNodes:e.childNodes)n instanceof HTMLElement||n instanceof DocumentFragment?t.appendChild(b(n)):t.appendChild(n.cloneNode());return t},D=new WeakMap,v=e=>{let t=document.body.parentElement;for(;null!=e.parentElement&&e.parentElement!==t;){let t=D.get(e);if(null!=t)return t;e=e.parentElement}return!1},y=Symbol("observer should be removed"),x=[],w=[];let k=!1;class C{constructor(e,t){let n;let i="string"==typeof t?`"${t}"`:`function ${t.name}`;if("string"==typeof e)this.test=t=>"string"==typeof t&&""!==t&&(e.startsWith(t)||t.startsWith(e)),n=`test = "${e}"`;else if(e instanceof RegExp)this.test=e.test.bind(e),n=`test = "${e.toString()}"`;else if(e instanceof Function)this.test=e,n=`test = function ${e.name}`;else throw Error("expect listener test to be a string, RegExp, or test function");if(this.description=`${n}, ${i}`,"function"==typeof t)this.callback=t;else throw Error("expect callback to be a path or function");x.push(this)}}const A=()=>{s.perf&&console.time("xin async update");let t=[...w];for(let e of t)x.filter(t=>{let n;try{n=t.test(e)}catch(n){throw Error(`Listener ${t.description} threw "${n}" at "${e}"`)}return n===y?(B(t),!1):n}).forEach(t=>{let n;try{n=t.callback(e)}catch(n){console.error(`Listener ${t.description} threw "${n}" handling "${e}"`)}n===y&&B(t)});w.splice(0),k=!1,"function"==typeof e&&e(),s.perf&&console.timeEnd("xin async update")},E=t=>{let n="string"==typeof t?t:p(t);if(void 0===n)throw console.error("touch was called on an invalid target",t),Error("touch was called on an invalid target");!1===k&&(new Promise(t=>{e=t}),k=setTimeout(A)),null==w.find(e=>n.startsWith(e))&&w.push(n)},F=(e,t)=>new C(e,t),B=e=>{let t=x.indexOf(e);if(t>-1)x.splice(t,1);else throw Error("unobserve failed, listener not found")},S=e=>{try{return JSON.stringify(e)}catch(e){return"{has circular references}"}},_=(...e)=>Error(e.map(S).join(" ")),$=()=>new Date(parseInt("1000000000",36)+Date.now()).valueOf().toString(36).slice(1);let j=0;const T=()=>(parseInt("10000",36)+ ++j).toString(36).slice(-5),z=()=>$()+T(),L={},R={};function M(e){if(""===e)return[];if(Array.isArray(e))return e;{let t=[];for(;e.length>0;){let n=e.search(/\[[^\]]+\]/);if(-1===n){t.push(e.split("."));break}{let i=e.slice(0,n);e=e.slice(n),""!==i&&t.push(i.split(".")),n=e.indexOf("]")+1,t.push(e.slice(1,n-1)),"."===e.slice(n,n+1)&&(n+=1),e=e.slice(n)}}return t}}const O=new WeakMap;function P(e,t){void 0===O.get(e)&&O.set(e,{}),void 0===O.get(e)[t]&&(O.get(e)[t]={});let n=O.get(e)[t];return"_auto_"===t?e.forEach((e,t)=>{void 0===e._auto_&&(e._auto_=z()),n[e._auto_+""]=t}):e.forEach((e,i)=>{n[H(e,t)+""]=i}),n}function I(e,t,n,i){var r;let s;let a=""!==t?(r=n+"",(void 0===(s=(void 0===O.get(e)||void 0===O.get(e)[t]?P(e,t):O.get(e)[t])[r])||H(e[s],t)+""!==r)&&(s=P(e,t)[r]),s):n;if(i===L)return e.splice(a,1),O.delete(e),Symbol("deleted");if(i===R)""===t&&void 0===e[a]&&(e[a]={});else if(void 0!==i){if(void 0!==a)e[a]=i;else if(""!==t&&H(i,t)+""==n+"")e.push(i),a=e.length-1;else throw Error(`byIdPath insert failed at [${t}=${n}]`)}return e[a]}function q(e){if(!Array.isArray(e))throw _("setByPath failed: expected array, found",e)}function N(e){if(null==e||!(e instanceof Object))throw _("setByPath failed: expected Object, found",e)}function H(e,t){let n,i,r,s;let a=M(t),o=e;for(n=0,i=a.length;void 0!==o&&n<i;n++){let e=a[n];if(Array.isArray(e))for(r=0,s=e.length;void 0!==o&&r<s;r++){let t=e[r];o=o[t]}else if(0===o.length){if(o=o[e.slice(1)],"="!==e[0])return}else if(e.includes("=")){let[t,...n]=e.split("=");o=I(o,t,n.join("="))}else o=o[r=parseInt(e,10)]}return o}const W=["sort","splice","copyWithin","fill","pop","push","reverse","shift","unshift"],V={},Z=/^\.?([^.[\](),])+(\.[^.[\](),]+|\[\d+\]|\[[^=[\](),]*=[^[\]()]+\])*$/,U=e=>Z.test(e),Q=(e="",t="")=>""===e?t:null!==t.match(/^\d+$/)||t.includes("=")?`${e}[${t}]`:`${e}.${t}`,Y=(e="")=>({get(t,n){if(n===h)return e;if(n===d){for(;void 0!==p(t);)t=f(t);return t}if("symbol"==typeof n)return t[n];let i=n,r=i.match(/^([^.[]+)\.(.+)$/)??i.match(/^([^\]]+)(\[.+)/)??i.match(/^(\[[^\]]+\])\.(.+)$/)??i.match(/^(\[[^\]]+\])\[(.+)$/);if(null!==r){let[,n,i]=r,s=Q(e,n),a=H(t,n);return null!==a&&"object"==typeof a?new Proxy(a,Y(s))[i]:a}if(i.startsWith("[")&&i.endsWith("]")&&(i=i.substring(1,i.length-1)),!Array.isArray(t)&&void 0!==t[i]||Array.isArray(t)&&i.includes("=")){let n;if(i.includes("=")){let[e,r]=i.split("=");n=t.find(t=>`${H(t,e)}`===r)}else n=t[i];if(null!==n&&"object"==typeof n){let t=Q(e,i);return new Proxy(n,Y(t))}return"function"==typeof n?n.bind(t):n}if(!Array.isArray(t))return t[i];{let n=t[i];return"function"==typeof n?(...n)=>{let r=Array.prototype[i].apply(t,n);return W.includes(i)&&E(e),r}:"object"==typeof n?new Proxy(n,Y(Q(e,i))):n}},set(t,n,i){i=f(i);let r=Q(e,n);if(!U(r))throw Error(`setting invalid path ${r}`);let s=f(J[r]);return s!==i&&function(e,t,n){let i=e,r=M(t);for(;null!=i&&r.length>0;){let e=r.shift();if("string"==typeof e){let t=e.indexOf("=");if(t>-1){0===t?N(i):q(i);let s=e.slice(0,t),a=e.slice(t+1);if(i=I(i,s,a,r.length>0?R:n),0===r.length)return!0}else{q(i);let t=parseInt(e,10);if(r.length>0)i=i[t];else{if(n!==L){if(i[t]===n)return!1;i[t]=n}else i.splice(t,1);return!0}}}else if(Array.isArray(e)&&e.length>0)for(N(i);e.length>0;){let t=e.shift();if(e.length>0||r.length>0){var s,a;s=i,a=e.length>0?{}:[],void 0===s[t]&&void 0!==a&&(s[t]=a),i=s[t]}else{if(n!==L){if(i[t]===n)return!1;i[t]=n}else{if(!Object.prototype.hasOwnProperty.call(i,t))return!1;delete i[t]}return!0}}else throw Error(`setByPath failed, bad path ${t}`)}throw Error(`setByPath(${e}, ${t}, ${n}) failed`)}(V,r,i)&&E(r),!0}}),X=(e,t)=>{let n="function"==typeof t?t:J[t];if("function"!=typeof n)throw Error(`observe expects a function or path to a function, ${t} is neither`);return F(e,n)},J=new Proxy(V,Y()),{document:G,MutationObserver:K}=globalThis,ee=(e,t)=>{let n=g.get(e);if(null!=n)for(let i of n){let{path:n,binding:r,options:s}=i,{toDOM:a}=r;if(null!=a){if(n.startsWith("^")){let t=v(e);if(null!=t&&null!=t[h])n=i.path=`${t[h]}${n.substring(1)}`;else throw console.error(`Cannot resolve relative binding ${n}`,e,"is not part of a list"),Error(`Cannot resolve relative binding ${n}`)}(null==t||n.startsWith(t))&&a(e,J[n],s)}}};if(null!=K){let e=new K(e=>{e.forEach(e=>{[...e.addedNodes].forEach(e=>{e instanceof HTMLElement&&[...e.querySelectorAll(l)].forEach(e=>ee(e))})})});e.observe(G.body,{subtree:!0,childList:!0})}X(()=>!0,e=>{let t=G.querySelectorAll(l);for(let n of t)ee(n,e)});const et=e=>{let t=e.target.closest(l);for(;null!=t;){let e=g.get(t);for(let n of e){let{binding:e,path:i}=n,{fromDOM:r}=e;if(null!=r){let e;try{e=r(t,n.options)}catch(e){throw console.error("Cannot get value from",t,"via",n),Error("Cannot obtain value fromDOM")}if(null!=e){let t=J[i];if(null==t)J[i]=e;else{let n=null!=t[h]?t[d]:t,r=null!=e[h]?e[d]:e;n!==r&&(J[i]=r)}}}}t=t.parentElement.closest(l)}};function en(e,t,n,i){let r;if(e instanceof DocumentFragment)throw Error("bind cannot bind to a DocumentFragment");if("object"==typeof t&&void 0===t[h]&&void 0===i){let{value:e}=t;r="string"==typeof e?e:e[h],i=t,delete i.value}else r="string"==typeof t?t:t[h];if(null==r)throw Error("bind requires a path or object with xin Proxy");let{toDOM:s}=n;e.classList.add(o);let a=g.get(e);return null==a&&(a=[],g.set(e,a)),a.push({path:r,binding:n,options:i}),null==s||r.startsWith("^")||E(r),e}null!=globalThis.document&&(G.body.addEventListener("change",et,!0),G.body.addEventListener("input",et,!0));const ei=new Set,er=e=>{let t=e?.target.closest(c),n=!1,i=new Proxy(e,{get(t,i){if("stopPropagation"===i)return()=>{e.stopPropagation(),n=!0};{let e=t[i];return"function"==typeof e?e.bind(t):e}}});for(;!n&&null!=t;){let r=m.get(t),s=r[e.type]||[];for(let e of s){if("function"==typeof e)e(i);else{let t=J[e];if("function"==typeof t)t(i);else throw Error(`no event handler found at path ${e}`)}if(n)continue}t=null!=t.parentElement?t.parentElement.closest(c):null}},es=(e,t,n)=>{let i=m.get(e);e.classList.add(u),null==i&&(i={},m.set(e,i)),i[t]||(i[t]=[]),i[t].includes(n)||i[t].push(n),ei.has(t)||(ei.add(t),G.body.addEventListener(t,er,!0))},ea=(e,t)=>{let n=new Event(t);e.dispatchEvent(n)},eo=e=>e instanceof HTMLInputElement?e.type:e instanceof HTMLSelectElement&&e.hasAttribute("multiple")?"multi-select":"other",el=(e,t)=>{switch(eo(e)){case"radio":e.checked=e.value===t;break;case"checkbox":e.checked=t;break;case"date":e.valueAsDate=new Date(t);break;case"multi-select":for(let n of[...e.querySelectorAll("option")])n.selected=t[n.value];break;default:e.value=t}},eu=e=>{switch(eo(e)){case"radio":{let t=e.parentElement?.querySelector(`[name="${e.name}"]:checked`);return null!=t?t.value:null}case"checkbox":return e.checked;case"date":return e.valueAsDate.toISOString();case"multi-select":return[...e.querySelectorAll("option")].reduce((e,t)=>(e[t.value]=t.selected,e),{});default:return e.value}},{ResizeObserver:ec}=globalThis,eh=null!=ec?new ec(e=>{for(let t of e){let e=t.target;ea(e,"resize")}}):{observe(){},unobserve(){}},ed=(e,t,n=!0)=>{if(null!=e&&null!=t){if("string"==typeof t)e.textContent=t;else if(Array.isArray(t))t.forEach(t=>{e.append(t instanceof Node&&n?b(t):t)});else if(t instanceof HTMLElement||t instanceof DocumentFragment)e.append(n?b(t):t);else throw Error("expect text content or document node")}},ep=(e,t=250)=>{let n;return(...i)=>{void 0!==n&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}},ef=(e,t=250)=>{let n;let i=Date.now()-t,r=!1;return(...s)=>{if(clearTimeout(n),n=setTimeout(async()=>{e(...s),i=Date.now()},t),!r&&Date.now()-i>=t){r=!0;try{e(...s),i=Date.now()}finally{r=!1}}}},em=Symbol("list-binding");function eg(e,t){let n=[...e.querySelectorAll(l)];for(let i of(e.matches(l)&&n.unshift(e),n)){let e=g.get(i);for(let n of e)n.path.startsWith("^")&&(n.path=`${t}${n.path.substring(1)}`),null!=n.binding.toDOM&&n.binding.toDOM(i,J[n.path])}}class eb{constructor(e,t={}){if(this._array=[],this.boundElement=e,this.itemToElement=new WeakMap,1!==e.children.length)throw Error("ListBinding expects an element with exactly one child element");if(e.children[0]instanceof HTMLTemplateElement){let t=e.children[0];if(1!==t.content.children.length)throw Error("ListBinding expects a template with exactly one child element");this.template=b(t.content.children[0])}else this.template=e.children[0],this.template.remove();this.listTop=document.createElement("div"),this.listBottom=document.createElement("div"),this.boundElement.append(this.listTop),this.boundElement.append(this.listBottom),this.options=t,null!=t.virtual&&(eh.observe(this.boundElement),this._update=ef(()=>{this.update(this._array,!0)},16),this.boundElement.addEventListener("scroll",this._update),this.boundElement.addEventListener("resize",this._update))}visibleSlice(){let{virtual:e,hiddenProp:t,visibleProp:n}=this.options,i=this._array;void 0!==t&&(i=i.filter(e=>!0!==e[t])),void 0!==n&&(i=i.filter(e=>!0===e[n]));let r=0,s=i.length-1,a=0,o=0;if(null!=e){let t=this.boundElement.offsetWidth,n=this.boundElement.offsetHeight,l=null!=e.width?Math.max(1,Math.floor(t/e.width)):1,u=Math.ceil(n/e.height)+1,c=Math.ceil(i.length/l),h=Math.floor(this.boundElement.scrollTop/e.height);h>c-u+1&&(h=Math.max(0,c-u+1)),s=(r=h*l)+l*u-1,a=h*e.height,o=Math.max(c*e.height-n-a,0)}return{items:i,firstItem:r,lastItem:s,topBuffer:a,bottomBuffer:o}}update(e,t){null==e&&(e=[]),this._array=e;let{initInstance:n,updateInstance:i,hiddenProp:r,visibleProp:a}=this.options,o=p(e),l=this.visibleSlice();this.boundElement.classList.toggle("-xin-empty-list",0===l.items.length);let u=this._previousSlice,{firstItem:c,lastItem:h,topBuffer:d,bottomBuffer:m}=l;if(void 0===r&&void 0===a&&!0===t&&null!=u&&c===u.firstItem&&h===u.lastItem)return;this._previousSlice=l;let g=0,v=0,y=0;for(let e of[...this.boundElement.children]){if(e===this.listTop||e===this.listBottom)continue;let t=D.get(e);if(null==t)e.remove();else{let n=l.items.indexOf(t);(n<c||n>h)&&(e.remove(),this.itemToElement.delete(t),D.delete(e),g++)}}this.listTop.style.height=String(d)+"px",this.listBottom.style.height=String(m)+"px";let x=[],{idPath:w}=this.options;for(let e=c;e<=h;e++){let t=l.items[e];if(void 0===t)continue;let r=this.itemToElement.get(f(t));if(null==r){if(y++,r=b(this.template),"object"==typeof t&&(this.itemToElement.set(f(t),r),D.set(r,f(t))),this.boundElement.insertBefore(r,this.listBottom),null!=w){let e=t[w],n=`${o}[${w}=${e}]`;eg(r,n)}else{let t=`${o}[${e}]`;eg(r,t)}null!=n&&n(r,t)}null!=i&&i(r,t),x.push(r)}let k=null;for(let e of x)e.previousElementSibling!==k&&(v++,k?.nextElementSibling!=null?this.boundElement.insertBefore(e,k.nextElementSibling):this.boundElement.insertBefore(e,this.listBottom)),k=e;s.perf&&console.log(o,"updated",{removed:g,created:y,moved:v})}}const eD=(e,t)=>{let n=e[em];return null==n&&(n=new eb(e,t),e[em]=n),n},ev={value:{toDOM(e,t){el(e,t)},fromDOM:e=>eu(e)},text:{toDOM(e,t){e.textContent=t}},enabled:{toDOM(e,t){e.disabled=!t}},disabled:{toDOM(e,t){e.disabled=!!t}},style:{toDOM(e,t){if("object"==typeof t)for(let n of Object.keys(t))e.style[n]=t[n];else if("string"==typeof t)e.setAttribute("style",t);else throw Error("style binding expects either a string or object")}},list:{toDOM(e,t,n){let i=eD(e,n);i.update(t)}}};function ey(e,t,n){return t<e?e:t>n?n:t}function ex(e,t,n){return(n=ey(0,n,1))*(t-e)+e}const ew={clamp:ey,lerp:ex},ek=e=>("00"+Math.round(Number(e)).toString(16)).slice(-2);class eC{constructor(e,t,n){e/=255,t/=255,n/=255;let i=Math.max(e,t,n),r=i-Math.min(e,t,n),s=0!==r?i===e?(t-n)/r:i===t?2+(n-e)/r:4+(e-t)/r:0;this.h=60*s<0?60*s+360:60*s,this.s=0!==r?i<=.5?r/(2*i-r):r/(2-(2*i-r)):0,this.l=(2*i-r)/2}}const eA=void 0!==globalThis.document?globalThis.document.createElement("span"):void 0;class eE{static fromCss(e){let t=e;eA instanceof HTMLSpanElement&&(eA.style.color=e,document.body.appendChild(eA),t=getComputedStyle(eA).color,eA.remove());let[n,i,r,s]=t.match(/[\d.]+/g);return new eE(Number(n),Number(i),Number(r),null==s?1:Number(s))}static fromHsl(e,t,n,i=1){return eE.fromCss(`hsla(${e.toFixed(0)}, ${(100*t).toFixed(0)}%, ${(100*n).toFixed(0)}%, ${i.toFixed(2)})`)}constructor(e,t,n,i=1){this.r=ey(0,e,255),this.g=ey(0,t,255),this.b=ey(0,n,255),this.a=void 0!==i?ey(0,i,1):i=1}get inverse(){return new eE(255-this.r,255-this.g,255-this.b,this.a)}get inverseLuminance(){let{h:e,s:t,l:n}=this._hsl;return eE.fromHsl(e,t,1-n,this.a)}get rgb(){let{r:e,g:t,b:n}=this;return`rgb(${e.toFixed(0)},${t.toFixed(0)},${n.toFixed(0)})`}get rgba(){let{r:e,g:t,b:n,a:i}=this;return`rgba(${e.toFixed(0)},${t.toFixed(0)},${n.toFixed(0)},${i.toFixed(2)})`}get RGBA(){return[this.r/255,this.g/255,this.b/255,this.a]}get ARGB(){return[this.a,this.r/255,this.g/255,this.b/255]}get _hsl(){return null==this._hslCached&&(this._hslCached=new eC(this.r,this.g,this.b)),this._hslCached}get hsl(){let{h:e,s:t,l:n}=this._hsl;return`hsl(${e.toFixed(0)}, ${(100*t).toFixed(0)}%, ${(100*n).toFixed(0)}%)`}get hsla(){let{h:e,s:t,l:n}=this._hsl;return`hsla(${e.toFixed(0)}, ${(100*t).toFixed(0)}%, ${(100*n).toFixed(0)}%, ${this.a.toFixed(2)})`}get mono(){let e=255*this.brightness;return new eE(e,e,e)}get brightness(){return(.299*this.r+.587*this.g+.114*this.b)/255}get html(){return 1===this.a?"#"+ek(this.r)+ek(this.g)+ek(this.b):"#"+ek(this.r)+ek(this.g)+ek(this.b)+ek(Math.floor(255*this.a))}brighten(e){let{h:t,s:n,l:i}=this._hsl;return i=ey(0,i+e*(1-i),1),eE.fromHsl(t,n,i,this.a)}darken(e){let{h:t,s:n,l:i}=this._hsl;return i=ey(0,i*(1-e),1),eE.fromHsl(t,n,i,this.a)}saturate(e){let{h:t,s:n,l:i}=this._hsl;return n=ey(0,n+e*(1-n),1),eE.fromHsl(t,n,i,this.a)}desaturate(e){let{h:t,s:n,l:i}=this._hsl;return n=ey(0,n*(1-e),1),eE.fromHsl(t,n,i,this.a)}rotate(e){let{h:t,s:n,l:i}=this._hsl;return t=(t+360+e)%360,eE.fromHsl(t,n,i,this.a)}opacity(e){let{h:t,s:n,l:i}=this._hsl;return eE.fromHsl(t,n,i,e)}swatch(){let{r:e,g:t,b:n,a:i}=this;console.log(`%c   %c ${this.html}, rgba(${e}, ${t}, ${n}, ${i}), ${this.hsla}`,`background-color: rgba(${e}, ${t}, ${n}, ${i})`,"background-color: #eee")}blend(e,t){return new eE(ex(this.r,e.r,t),ex(this.g,e.g,t),ex(this.b,e.b,t),ex(this.a,e.a,t))}}function eF(e){return e.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}const eB={},eS=(e,...t)=>{if(void 0===eB[e]){let[t,n]=e.split("|");void 0===n?eB[e]=globalThis.document.createElement(t):eB[e]=globalThis.document.createElementNS(n,t)}let n=eB[e].cloneNode(),i={};for(let e of t)e instanceof Element||e instanceof DocumentFragment||"string"==typeof e||"number"==typeof e?n instanceof HTMLTemplateElement?n.content.append(e):n.append(e):Object.assign(i,e);for(let e of Object.keys(i)){let t=i[e];if("apply"===e)t(n);else if("style"===e){if("object"==typeof t)for(let e of Object.keys(t))e.startsWith("--")?n.style.setProperty(e,t[e]):n.style[e]=t[e];else n.setAttribute("style",t)}else if(null!=e.match(/^on[A-Z]/)){let i=e.substring(2).toLowerCase();es(n,i,t)}else if(null!=e.match(/^bind[A-Z]/)){let i=e.substring(4,5).toLowerCase()+e.substring(5),r=ev[i];if(void 0!==r)en(n,t,r);else throw Error(`${e} is not allowed, bindings.${i} is not defined`)}else if(void 0!==n[e]){let{MathMLElement:i}=globalThis;n instanceof SVGElement||void 0!==i&&n instanceof i?n.setAttribute(e,t):n[e]=t}else{let i=eF(e);"class"===i?t.split(" ").forEach(e=>{n.classList.add(e)}):void 0!==n[i]?n[i]=t:"boolean"==typeof t?t?n.setAttribute(i,""):n.removeAttribute(i):n.setAttribute(i,t)}}return n},e_=(...e)=>{let t=globalThis.document.createDocumentFragment();for(let n of e)t.append(n);return t},e$=new Proxy({fragment:e_},{get:(e,t)=>(void 0===e[t=t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)]&&(e[t]=(...e)=>eS(t,...e)),e[t]),set(){throw Error("You may not add new properties to elements")}}),ej=new Proxy({fragment:e_},{get:(e,t)=>(void 0===e[t]&&(e[t]=(...e)=>eS(`${t}|http://www.w3.org/2000/svg`,...e)),e[t]),set(){throw Error("You may not add new properties to elements")}}),eT=new Proxy({fragment:e_},{get:(e,t)=>(void 0===e[t]&&(e[t]=(...e)=>eS(`${t}|http://www.w3.org/1998/Math/MathML`,...e)),e[t]),set(){throw Error("You may not add new properties to elements")}}),ez=["animation-iteration-count","flex","flex-base","flex-grow","flex-shrink","gap","opacity","order","tab-size","widows","z-index","zoom"],eL=(e,t,n)=>void 0===n?"":"string"==typeof n||ez.includes(t)?`${e}  ${t}: ${n};`:`${e}  ${t}: ${n}px;`,eR=(e,t,n="")=>{let i=eF(e);if("object"!=typeof t)return eL(n,i,t);{let i=Object.keys(t).map(e=>eR(e,t[e],`${n}  `)).join("\n");return`${n}  ${e} {
${i}
${n}  }`}},eM=(e,t="")=>{let n=Object.keys(e).map(n=>{let i=e[n];if("string"==typeof i){if("@import"===n)return`@import url('${i}');`;throw Error("top-level string value only allowed for `@import`")}let r=Object.keys(i).map(e=>eR(e,i[e])).join("\n");return`${t}${n} {
${r}
}`});return n.join("\n\n")},eO=e=>{let t={};for(let n of Object.keys(e)){let i=e[n],r=eF(n);t[`--${r}`]="number"==typeof i&&0!==i?String(i)+"px":i}return t},eP=e=>{let t={};for(let n of Object.keys(e)){let i=e[n];"string"==typeof i&&null!=i.match(/^(#|rgb[a]?\(|hsl[a]?\()/)&&(i=eE.fromCss(i).inverseLuminance.html,t[`--${eF(n)}`]=i)}return t},eI=new Proxy({},{get(e,t){if(null==e[t]){let[,n,,i,r,s]=(t=t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)).match(/^([^\d_]*)((_)?(\d+)(\w*))?$/);if(n=`--${n}`,null!=r){let a=null==i?Number(r)/100:-Number(r)/100;switch(s){case"b":{let i=getComputedStyle(document.body).getPropertyValue(n);e[t]=a>0?eE.fromCss(i).brighten(a).rgba:eE.fromCss(i).darken(-a).rgba}break;case"s":{let i=getComputedStyle(document.body).getPropertyValue(n);e[t]=a>0?eE.fromCss(i).saturate(a).rgba:eE.fromCss(i).desaturate(-a).rgba}break;case"h":{let i=getComputedStyle(document.body).getPropertyValue(n);e[t]=eE.fromCss(i).rotate(100*a).rgba,console.log(eE.fromCss(i).hsla,eE.fromCss(i).rotate(a).hsla)}break;case"o":{let i=getComputedStyle(document.body).getPropertyValue(n);e[t]=eE.fromCss(i).opacity(a).rgba}break;case"":e[t]=`calc(var(${n}) * ${a})`;break;default:throw console.error(s),Error(`Unrecognized method ${s} for css variable ${n}`)}}else e[t]=`var(${n})`}return e[t]}}),eq=new Proxy({},{get(e,t){if(void 0===e[t]){let n=`--${t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}`;e[t]=e=>`var(${n}, ${e})`}return e[t]}});let eN=0;function eH(){return`custom-elt${(eN++).toString(36)}`}let eW=0;class eV extends HTMLElement{static #e=(()=>{this.elements=e$})();static StyleNode(e){return e$.style(eM(e))}static elementCreator(e){if(null==this._elementCreator){let t=null!=e?e.tag:null;for(null==t&&("string"==typeof this.name&&""!==this.name?(t=eF(this.name)).startsWith("-")&&(t=t.slice(1)):t=eH()),null!=customElements.get(t)&&console.warn(`${t} is already defined`),null==t.match(/\w+(-\w+)+/)&&(console.warn(`${t} is not a legal tag for a custom-element`),t=eH());void 0!==customElements.get(t);)t=eH();window.customElements.define(t,this,e),this._elementCreator=e$[t]}return this._elementCreator}initAttributes(...e){let t={},n={},i=new MutationObserver(t=>{let n=!1;t.forEach(t=>{n=!!(t.attributeName&&e.includes(t.attributeName.replace(/-([a-z])/g,(e,t)=>t.toLocaleUpperCase())))}),n&&void 0!==this.queueRender&&this.queueRender(!1)});i.observe(this,{attributes:!0}),e.forEach(e=>{t[e]=a(this[e]);let i=eF(e);Object.defineProperty(this,e,{enumerable:!1,get(){return"boolean"==typeof t[e]?this.hasAttribute(i):this.hasAttribute(i)?"number"==typeof t[e]?parseFloat(this.getAttribute(i)):this.getAttribute(i):void 0!==n[e]?n[e]:t[e]},set(r){"boolean"==typeof t[e]?r!==this[e]&&(r?this.setAttribute(i,""):this.removeAttribute(i),this.queueRender()):"number"==typeof t[e]?r!==parseFloat(this[e])&&(this.setAttribute(i,r),this.queueRender()):("object"==typeof r||`${r}`!=`${this[e]}`)&&(null==r||"object"==typeof r?this.removeAttribute(i):this.setAttribute(i,r),this.queueRender(),n[e]=r)}})})}initValue(){let e=Object.getOwnPropertyDescriptor(this,"value");if(void 0===e||void 0!==e.get||void 0!==e.set)return;let t=this.hasAttribute("value")?this.getAttribute("value"):a(this.value);delete this.value,Object.defineProperty(this,"value",{enumerable:!1,get:()=>t,set(e){t!==e&&(t=e,this.queueRender(!0))}})}get refs(){console.warn("refs and data-ref are deprecated, use the part attribute and .parts instead");let e=null!=this.shadowRoot?this.shadowRoot:this;return null==this._refs&&(this._refs=new Proxy({},{get(t,n){if(void 0===t[n]){let i=e.querySelector(`[part="${n}"],[data-ref="${n}"]`);if(null==i&&(i=e.querySelector(n)),null==i)throw Error(`elementRef "${n}" does not exist!`);i.removeAttribute("data-ref"),t[n]=i}return t[n]}})),this._refs}get parts(){let e=null!=this.shadowRoot?this.shadowRoot:this;return null==this._refs&&(this._refs=new Proxy({},{get(t,n){if(void 0===t[n]){let i=e.querySelector(`[part="${n}"]`);if(null==i&&(i=e.querySelector(n)),null==i)throw Error(`elementRef "${n}" does not exist!`);i.removeAttribute("data-ref"),t[n]=i}return t[n]}})),this._refs}constructor(){super(),this.content=e$.slot(),this._changeQueued=!1,this._renderQueued=!1,this._hydrated=!1,eW+=1,this.initAttributes("hidden"),this.instanceId=`${this.tagName.toLocaleLowerCase()}-${eW}`,this._value=a(this.defaultValue)}connectedCallback(){this.hydrate(),null!=this.role&&this.setAttribute("role",this.role),void 0!==this.onResize&&(eh.observe(this),null==this._onResize&&(this._onResize=this.onResize.bind(this)),this.addEventListener("resize",this._onResize)),null!=this.value&&null!=this.getAttribute("value")&&(this._value=this.getAttribute("value")),this.queueRender()}disconnectedCallback(){eh.unobserve(this)}queueRender(e=!1){this._hydrated&&(this._changeQueued||(this._changeQueued=e),this._renderQueued||(this._renderQueued=!0,requestAnimationFrame(()=>{this._changeQueued&&ea(this,"change"),this._changeQueued=!1,this._renderQueued=!1,this.render()})))}hydrate(){if(!this._hydrated){this.initValue();let e="function"!=typeof this.content,t="function"==typeof this.content?this.content():this.content;if(void 0!==this.styleNode){let n=this.attachShadow({mode:"open"});n.appendChild(this.styleNode),ed(n,t,e)}else if(null!==t){let n=[...this.childNodes];ed(this,t,e),this.isSlotted=void 0!==this.querySelector("slot,xin-slot");let i=[...this.querySelectorAll("slot")];if(i.length>0&&i.forEach(eZ.replaceSlot),n.length>0){let e={"":this};[...this.querySelectorAll("xin-slot")].forEach(t=>{e[t.name]=t}),n.forEach(t=>{let n=e[""],i=t instanceof Element?e[t.slot]:n;(void 0!==i?i:n).append(t)})}}this._hydrated=!0}}render(){}}class eZ extends eV{static replaceSlot(e){let t=document.createElement("xin-slot");""!==e.name&&t.setAttribute("name",e.name),e.replaceWith(t)}constructor(){super(),this.name="",this.content=null,this.initAttributes("name")}}eZ.elementCreator({tag:"xin-slot"});const eU=(e=()=>!0)=>{let t=localStorage.getItem("xin-state");if(null!=t){let n=JSON.parse(t);for(let t of Object.keys(n).filter(e))void 0!==J[t]?Object.assign(J[t],n[t]):J[t]=n[t]}let n=ep(()=>{let t={},n=J[d];for(let i of Object.keys(n).filter(e))t[i]=n[i];localStorage.setItem("xin-state",JSON.stringify(t)),console.log("xin state saved to localStorage")},500);X(e,n)};function eQ(e){let t={};return Object.keys(e).forEach(n=>{J[n]=e[n],t[n]=J[n]}),t}var eY={};n(eY,"trackDrag",()=>te),n(eY,"scriptTag",()=>eG),n(eY,"styleSheet",()=>e0),n(eY,"makeSorter",()=>np);var eX={};n(eX,"BodymovinPlayer",()=>e1),n(eX,"bodymovinPlayer",()=>e2);const eJ={};function eG(e,t){if(void 0===eJ[e]){if(void 0!==t){let n=globalThis[t];eJ[e]=Promise.resolve({[t]:n})}let n=e$.script({src:e});document.head.append(n),eJ[e]=new Promise(e=>{n.onload=()=>e(globalThis)})}return eJ[e]}const eK={};function e0(e){if(void 0===eK[e]){let t=e$.link({rel:"stylesheet",type:"text/css",href:e});document.head.append(t),eK[e]=new Promise(e=>{t.onload=e})}return eK[e]}class e1 extends eV{content=null;src="";json="";config={renderer:"svg",loop:!0,autoplay:!0};static bodymovinAvailable;animation;styleNode=eV.StyleNode({":host":{width:400,height:400,display:"inline-block"}});_loading=!1;get loading(){return this._loading}constructor(){super(),this.initAttributes("src","json"),void 0===e1.bodymovinAvailable&&(e1.bodymovinAvailable=eG("https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js","bodymovin"))}doneLoading=()=>{this._loading=!1};load=({bodymovin:e})=>{if(this._loading=!0,this.config.container=null!==this.shadowRoot?this.shadowRoot:void 0,""!==this.json?(this.config.animationData=this.json,delete this.config.path):""!==this.src?(delete this.config.animationData,this.config.path=this.src):console.log("%c<bodymovin-player>%c expected either %cjson%c (animation data) or %csrc% c(url) but found neither.","color: #44f; background: #fff; padding: 0 5px","color: default","color: #44f; background: #fff; padding: 0 5px","color: default","color: #44f; background: #fff; padding: 0 5px","color: default"),this.animation){this.animation.destroy();let e=this.shadowRoot;null!==e&&e.querySelector("svg")?.remove()}this.animation=e.loadAnimation(this.config),this.animation.addEventListener("DOMLoaded",this.doneLoading)};render(){super.render(),e1.bodymovinAvailable.then(this.load).catch(e=>{console.error(e)})}}const e2=e1.elementCreator({tag:"bodymovin-player"});var e3={};n(e3,"CodeEditor",()=>e6),n(e3,"codeEditor",()=>e4);const e8="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.2/",e5="ace/theme/tomorrow",e9=async(e,t="html",n={},i=e5)=>{let{ace:r}=await eG(`${e8}ace.min.js`);r.config.set("basePath",e8);let s=r.edit(e,{mode:`ace/mode/${t}`,tabSize:2,useSoftTabs:!0,useWorker:!1,...n});return s.setTheme(i),s};class e6 extends eV{source="";get value(){return void 0===this.editor?this.source:this.editor.getValue()}set value(e){void 0===this.editor?this.source=e:this.editor.setValue(e)}mode="javascript";disabled=!1;role="code editor";get editor(){return this._editor}_editor;_editorPromise;options={};theme=e5;styleNode=eV.StyleNode({":host":{display:"block",position:"relative"}});constructor(){super(),this.initAttributes("mode","theme","disabled")}onResize(){void 0!==this.editor&&this.editor.resize(!0)}connectedCallback(){super.connectedCallback(),""===this.source&&(this.value=this.innerText.trim()),void 0===this._editorPromise&&(this._editorPromise=e9(this,this.mode,this.options,this.theme),this._editorPromise.then(e=>{this._editor=e,e.setValue(this.source,1)})),this.addEventListener("change",this.updateValue)}render(){super.render(),void 0!==this._editorPromise&&this._editorPromise.then(e=>e.setReadOnly(this.disabled))}}const e4=e6.elementCreator({tag:"code-editor"});var e7={};n(e7,"DataTable",()=>ts),n(e7,"dataTable",()=>ta);const te=(e,t,n="move")=>{let i=e.type.startsWith("touch");if(i){if(e instanceof TouchEvent){let n=e.changedTouches[0],i=n.identifier,r=n.clientX,s=n.clientY,a=e.target,o=0,l=0,u=e=>{let n=[...e.touches].find(e=>e.identifier===i);void 0!==n&&(o=n.clientX-r,l=n.clientY-s),(!0===t(o,l,e)||void 0===n)&&(a.removeEventListener("touchmove",u),a.removeEventListener("touchend",u),a.removeEventListener("touchcancel",u))};a.addEventListener("touchmove",u,{passive:!0}),a.addEventListener("touchend",u,{passive:!0}),a.addEventListener("touchcancel",u,{passive:!0})}}else{let i=e.clientX,r=e.clientY,s=e$.div({style:{content:" ",position:"fixed",top:0,left:0,right:0,bottom:0,cursor:n}});document.body.append(s);let a=e=>{let n=e.clientX-i,a=e.clientY-r;!0===t(n,a,e)&&s.remove()};s.addEventListener("mousemove",a,{passive:!0}),s.addEventListener("mouseup",a,{passive:!0})}},{div:tt,span:tn,template:ti}=e$,tr=e=>e;class ts extends eV{maxVisibleRows=1e4;get value(){return{array:this.array,filter:this.filter,columns:this.columns}}set value(e){let{array:t,columns:n,filter:i}=f(e);(this._array!==t||this._columns!==n||this._filter!==i)&&this.queueRender(),this._array=t||[],this._columns=n||null,this._filter=i||tr}_array=[];_columns=null;_filter=tr;charWidth=15;rowHeight=30;minColumnWidth=30;get virtual(){return this.rowHeight>0?{height:this.rowHeight}:void 0}constructor(){super(),this.initAttributes("rowHeight","charWidth","minColumnWidth")}get array(){return this._array}set array(e){this._array=f(e),this.queueRender()}get filter(){return this._filter}set filter(e){this._filter!==e&&(this._filter=e,this.queueRender())}get columns(){if(!Array.isArray(this._columns)){let{_array:e}=this;this._columns=Object.keys(e[0]||{}).map(t=>{let n=function(e,t,n){let i=e.find(e=>void 0!==e[t]&&null!==e[t]);if(void 0!==i){let e=i[t];switch(typeof e){case"string":if(e.match(/^\d+(\.\d+)?$/))return 6*n;if(e.includes(" "))return 20*n;return 12*n;case"number":return 6*n;case"boolean":return 5*n;case"object":break;default:return 8*n}}return!1}(e,t,this.charWidth);return{name:t.replace(/([a-z])([A-Z])/g,"$1 $2").toLocaleLowerCase(),prop:t,align:"number"!=typeof e[0][t]&&(""===e[0][t]||isNaN(e[0][t]))?"left":"right",visible:!1!==n,width:n||0}})}return this._columns}set columns(e){this._columns=e,this.queueRender()}get visibleColumns(){return this.columns.filter(e=>!1!==e.visible)}get visibleRecords(){return J[this.instanceId]}content=null;getColumn(e){let t=(void 0!==e.touches?e.touches[0].clientX:e.clientX)-this.getBoundingClientRect().x,n=void 0!==e.touches?20:5,i=0,r=[],s=this.visibleColumns.find(e=>{if(!1!==e.visible)return i+=e.width,r.push(i),Math.abs(t-i)<n});return s}setCursor=e=>{let t=this.getColumn(e);void 0!==t?this.style.cursor="col-resize":this.style.cursor=""};resizeColumn=e=>{let t=this.getColumn(e);if(void 0!==t){let n=t.width,i=void 0!==e.touches,r=i?e.touches[0].identifier:void 0;te(e,(e,s,a)=>{let o=!i||[...a.touches].find(e=>e.identifier===r);if(void 0===o)return!0;let l=n+e;if(t.width=l>this.minColumnWidth?l:this.minColumnWidth,this.setColumnWidths(),"mouseup"===a.type)return!0},"col-resize")}};connectedCallback(){super.connectedCallback(),this.addEventListener("mousemove",this.setCursor),this.addEventListener("mousedown",this.resizeColumn),this.addEventListener("touchstart",this.resizeColumn,{passive:!0})}setColumnWidths(){this.style.setProperty("--grid-columns",this.visibleColumns.map(e=>e.width+"px").join(" "))}get rowStyle(){return{display:"grid",gridTemplateColumns:eI.gridColumns,height:this.rowHeight+"px",lineHeight:this.rowHeight+"px"}}get cellStyle(){return{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}headerCell=e=>void 0!==e.headerCell?e.headerCell(e):tn({class:"th",role:"columnheader",ariaSort:"none",style:{...this.cellStyle,textAlign:e.align||"left"}},"string"==typeof e.name?e.name:e.prop);dataCell=e=>void 0!==e.dataCell?e.dataCell(e):tn({class:"td",role:"cell",style:{...this.cellStyle,textAlign:e.align||"left"},bindText:`^.${e.prop}`});get visibleRows(){return f(J[this.instanceId])}render(){super.render();let e=this.filter(this._array);J[this.instanceId]=e.slice(0,this.maxVisibleRows),this.textContent="",this.style.display="flex",this.style.flexDirection="column";let{visibleColumns:t}=this;this.setColumnWidths(),this.append(tt({class:"thead",role:"rowgroup",style:{touchAction:"none"}},tt({class:"tr",role:"row",style:this.rowStyle},...t.map(this.headerCell))),tt({class:"tbody",role:"rowgroup",style:{content:" ",minHeight:"100px",flex:"1 1 100px",overflow:"hidden",overflowY:"scroll"},bindList:{value:this.instanceId,virtual:this.virtual}},ti(tt({class:"tr",role:"row",style:this.rowStyle},...t.map(this.dataCell)))))}}const ta=ts.elementCreator({tag:"data-table"});var to={};n(to,"availableFilters",()=>tb),n(to,"FilterPart",()=>ty),n(to,"filterPart",()=>tx),n(to,"FilterBuilder",()=>tw),n(to,"filterBuilder",()=>tk);const{div:tl,input:tu,select:tc,option:th,button:td,span:tp,style:tf}=e$;document.head.append(tf({id:"filter-builder"},`filter-part {
  display: flex;
}

filter-part [part="needle"] {
  flex: 1 1 auto;
  width: 80px;
}

filter-part [hidden]+[part="padding"] {
  display: block;
  content: ' ';
  flex: 1 1 auto;
}
  
filter-builder {
  width: 100%;
  height: auto;
  display: flex;
  align-items: center;
}

filter-builder [part="filterContainer"] {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  flex: 1 1 auto;
}

filter-builder [part="add"],
filter-builder [part="reset"] {
  --button-size: var(--touch-size, 32px);
  border-radius: 999px;
  height: var(--button-size);
  line-height: var(--button-size);
  margin: 0;
  padding: 0;
  text-align: center;
  width: var(--button-size);
  flex: 0 0 var(--button-size);
}
`));const tm=e=>e,tg="null filter, everything matches",tb={contains:{caption:"contains",negative:"does not contain",makeTest:e=>(e=e.toLocaleLowerCase(),t=>String(t).toLocaleLowerCase().includes(e))},equals:{caption:"=",negative:"≠",makeTest:e=>{if(isNaN(Number(e)))return e=String(e).toLocaleLowerCase(),t=>String(t).toLocaleLowerCase()===e;let t=Number(e);return e=>Number(e)===t}},after:{caption:"is after",negative:"is before",makeTest:e=>{let t=new Date(e);return e=>new Date(e)>t}},greaterThan:{caption:">",negative:"≤",makeTest:e=>{if(!isNaN(Number(e))){let t=Number(e);return e=>Number(e)>t}return e=e.toLocaleLowerCase(),t=>String(t).toLocaleLowerCase()>e}},truthy:{caption:"is true / non-empty / no-zero",negative:"is false / empty / zero",needsValue:!1,makeTest:()=>e=>!!e},isTrue:{caption:"= true",needsValue:!1,makeTest:()=>e=>!0===e},isFalse:{caption:"= false",needsValue:!1,makeTest:()=>e=>!1===e}},tD={description:"anything",test:()=>!0};function tv(e){return e.options[e.selectedIndex].text}class ty extends eV{fields=[];filters=tb;content=[tc({part:"haystack"}),tc({part:"condition"}),tu({part:"needle"}),tp({part:"padding"}),td({part:"remove",title:"delete"},tp({class:"icon-trash"}))];filter=tD;buildFilter=()=>{let e;let{haystack:t,condition:n,needle:i}=this.parts,[,r,s]=n.value.match(/^(~)?(.+)/),a=this.filters[s];i.hidden=!1===a.needsValue;let o=!1===a.needsValue?a.makeTest(void 0):a.makeTest(i.value),l=t.value;e=""!==l?"~"===r?e=>!o(e[l]):e=>o(e[l]):"~"===r?e=>void 0!==Object.values(e).find(e=>!o(e)):e=>void 0!==Object.values(e).find(e=>o(e));let u=!1!==a.needsValue?` "${i.value}"`:"",c=`${tv(t)} ${tv(n)}${u}`;console.log(c),this.filter={description:c,test:e},this.parentElement?.dispatchEvent(new Event("change"))};connectedCallback(){super.connectedCallback();let{haystack:e,condition:t,needle:n,remove:i}=this.parts;e.addEventListener("change",this.buildFilter),t.addEventListener("change",this.buildFilter),n.addEventListener("input",this.buildFilter),e.value="",t.value=Object.keys(this.filters)[0],n.value="",i.addEventListener("click",()=>{let{parentElement:e}=this;this.remove(),e?.dispatchEvent(new Event("change"))})}render(){super.render();let{haystack:e,condition:t}=this.parts;e.textContent="",e.append(th("any field",{value:""}),...this.fields.map(e=>{let t=e.name||e.prop;return th(`${t}`,{value:e.prop})})),t.textContent="";let n=Object.keys(this.filters).map(e=>{let t=this.filters[e];return void 0!==t.negative?[th(t.caption,{value:e}),th(t.negative,{value:"~"+e})]:th(t.caption,{value:e})}).flat();t.append(...n)}}const tx=ty.elementCreator({tag:"filter-part"});class tw extends eV{fields=[];filter=tm;description=tg;addFilter=()=>{let{fields:e,filters:t}=this,{filterContainer:n}=this.parts;n.append(tx({fields:e,filters:t}))};content=()=>[td({part:"add",title:"add filter condition",onClick:this.addFilter,class:"round"},tp({class:"icon-plus"})),tl({part:"filterContainer"}),td({part:"reset",title:"reset filter",onClick:this.reset},tp({class:"icon-x"}))];filters=tb;reset=()=>{let{fields:e,filters:t}=this,{filterContainer:n}=this.parts;this.description=tg,this.filter=tm,n.textContent="",n.append(tx({fields:e,filters:t})),this.dispatchEvent(new Event("change"))};buildFilter=()=>{let{filterContainer:e}=this.parts;if(0===e.children.length){this.reset();return}let t=[...e.children].map(e=>e.filter),n=t.map(e=>e.test);this.description=t.map(e=>e.description).join(", "),this.filter=e=>e.filter(e=>void 0===n.find(t=>!1===t(e))),console.log(this.description,this.filter),this.dispatchEvent(new Event("change"))};connectedCallback(){super.connectedCallback();let{filterContainer:e}=this.parts;e.addEventListener("change",this.buildFilter),this.reset()}render(){super.render()}}const tk=tw.elementCreator({tag:"filter-builder"});var tC={};n(tC,"LiveExample",()=>tM),n(tC,"liveExample",()=>tO),n(tC,"makeExamplesLive",()=>tP);var tA={};n(tA,"TabSelector",()=>tB),n(tA,"tabSelector",()=>tS);const{div:tE,slot:tF}=e$;class tB extends eV{value=0;styleNode=eV.StyleNode({":host":{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",boxShadow:"none !important"},slot:{position:"relative",display:"block",flex:"1 1 auto",overflow:"hidden",overflowY:"auto"},'slot[name="after-tabs"]':{flex:"0 0 auto"},"::slotted([hidden])":{display:"none !important"},":host .tab-holder":{display:"flex",flexDirection:"column"},":host .tab-row":{display:"flex"},":host .tabs":{display:"flex",userSelect:"none",whiteSpace:"nowrap"},":host .tabs > div":{padding:`${eI.spacing50} ${eI.spacing}`,cursor:"default"},':host .tabs > [aria-selected="true"]':{color:eI.tabSelectorSelectedColor},":host .border":{background:"var(--tab-selector-bar-color, #ccc)"},":host .border > .selected":{content:" ",width:0,height:"var(--tab-selector-bar-height, 2px)",background:eI.tabSelectorSelectedColor,transition:"ease-out 0.2s"}});content=[tE({class:"tab-holder",role:"tabpanel"},tE({class:"tab-row"},tE({class:"tabs",part:"tabs"}),tE({style:{flex:"1 1 auto"}}),tF({name:"after-tabs"})),tE({class:"border"},tE({class:"selected",part:"selected"}))),tF()];constructor(){super(),this.initAttributes("anne","example")}addTabBody(e,t=!1){if(!e.hasAttribute("name"))throw console.error("element has no name attribute",e),Error("element has no name attribute");this.shadowRoot?.append(e),this.setupTabs(),t&&(this.value=this.bodies.length-1),this.queueRender()}keyTab=e=>{let{tabs:t}=this.parts,n=[...t.children].indexOf(e.target);switch(e.key){case"ArrowLeft":this.value=(n+Number(t.children.length)-1)%t.children.length,t.children[this.value].focus(),e.preventDefault();break;case"ArrowRight":this.value=(n+1)%t.children.length,t.children[this.value].focus(),e.preventDefault();break;case" ":this.pickTab(e),e.preventDefault()}};get bodies(){return[...this.children].filter(e=>e.hasAttribute("name"))}pickTab=e=>{let{tabs:t}=this.parts,n=e.target,i=[...t.children].indexOf(n);i>-1&&(this.value=i)};setupTabs=()=>{let{tabs:e}=this.parts,t=[...this.children];for(let n in t.filter(e=>e.hasAttribute("name")),e.textContent="",t){let i=t[n],r=i.getAttribute("name"),s=`${this.instanceId}-${n}`;i.id=s,e.append(tE(r,{tabindex:0,role:"tab",ariaControls:s}))}};connectedCallback(){super.connectedCallback();let{tabs:e}=this.parts;e.addEventListener("click",this.pickTab),e.addEventListener("keydown",this.keyTab),this.setupTabs()}render(){let{tabs:e,selected:t}=this.parts,n=this.bodies;for(let i=0;i<n.length;i++){let r=n[i],s=e.children[i];this.value===Number(i)?(s.setAttribute("aria-selected","true"),t.style.marginLeft=`${s.offsetLeft-e.offsetLeft}px`,t.style.width=`${s.offsetWidth}px`,r.removeAttribute("hidden")):(s.removeAttribute("aria-selected"),r.setAttribute("hidden",""))}}}const tS=tB.elementCreator({tag:"tab-selector"}),{div:t_,span:t$,xinSlot:tj,style:tT,button:tz}=e$,tL=(async()=>{}).constructor,tR={style:{width:"100%",height:"100%"}};document.head.append(tT({id:"live-example"},`:root {
  --live-example-height: 400px;
}

live-example {
  --live-example-preview-height: calc(var(--live-example-height) * 0.5);
  --live-example-editor-height: calc(var(--live-example-height) * 0.5);
  position: relative;
  display: flex;
  flex-direction: column;
  height: var(--live-example-height);
  background: var(--background);
}

live-example.-maximize {
  position: fixed;
  left: 0;
  top: 0;
  height: 100vh;
  width: 100vw;
  margin: 0 !important;
}

live-example.-maximize .hide-if-maximized,
live-example:not(.-maximize) .show-if-maximized {
  display: none;
}

live-example [part="example"] {
  flex: 1 1 var(--live-example-preview-height);
  height: var(--live-example-preview-height);
  position: relative;
}

live-example [part=preview] {
  height: 100%;
  position: relative;
  overflow: hidden;
  background: #f7f7f7 url('data:image/svg+xml,\
  <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 8 8" fill-opacity=".02" >\
  <rect x="4" width="4" height="4" /><rect y="4" width="4" height="4" /></svg>');
}

live-example [part="editors"] {
  flex: 1 1 var(--live-example-editor-height);
  height: var(--live-example-editor-height);
  position: relative;
}
`));class tM extends eV{context={xinjs:r,xinjsui:eY};static insertExamples(e){let t=[...e.querySelectorAll('pre code[class="language-html"],pre code[class="language-js"],pre code[class="language-css"]')].map(e=>({block:e.parentElement,language:e.classList[0].split("-").pop(),code:e.innerText}));for(let e=0;e<t.length;e+=1){let n=[t[e]];for(;e<t.length-1&&t[e].block.nextElementSibling===t[e+1].block;)n.push(t[e+1]),e+=1;let i=tO({style:{margin:"1em -1em"}});n[0].block.parentElement.insertBefore(i,n[0].block),n.forEach(e=>{switch(e.language){case"js":i.js=e.code;break;case"html":i.html=e.code;break;case"css":i.css=e.code}e.block.remove()}),i.showDefaultTab()}}get css(){return this.parts.css.value}set css(e){this.parts.css.value=e}get html(){return this.parts.html.value}set html(e){this.parts.html.value=e}get js(){return this.parts.js.value}set js(e){this.parts.js.value=e}content=()=>[t_({part:"example"},tT({part:"style"}),t_({part:"preview",class:"preview"})),tS({part:"editors"},e4({name:"js",mode:"javascript",part:"js",...tR}),e4({name:"html",mode:"html",part:"html",...tR}),e4({name:"css",mode:"css",part:"css",...tR}),tz({slot:"after-tabs",title:"copy as markdown",class:"transparent",onClick:this.copy},t$({class:"icon-copy"})),tz({slot:"after-tabs",title:"reload",class:"transparent",onClick:this.refresh},t$({class:"icon-refresh"})),tz({part:"maximize",slot:"after-tabs",title:"maximize",class:"transparent",onClick:this.toggleMaximize},t$({class:"show-if-maximized icon-minimize"}),t$({class:"hide-if-maximized icon-maximize"}))),tj({part:"sources",hidden:!0})];connectedCallback(){super.connectedCallback();let{sources:e}=this.parts;this.initFromElements([...e.children])}copy=()=>{let e=""!==this.js?"```js\n"+this.js+"\n```\n":"",t=""!==this.js?"```html\n"+this.html+"\n```\n":"",n=""!==this.js?"```css\n"+this.css+"\n```\n":"";navigator.clipboard.writeText(e+t+n)};toggleMaximize=()=>{this.classList.toggle("-maximize")};refresh=()=>{let{style:e,preview:t}=this.parts;e.innerText=this.css,t.innerHTML=this.html;let n={preview:t,...this.context},i=new tL(...Object.keys(n),this.js);i(...Object.values(n)).catch(e=>console.error(e))};initFromElements(e){for(let t of e){t.hidden=!0;let[e,...n]=t.innerHTML.split("\n");if(["js","html","css"].includes(e)){let t=n.filter(e=>""!==e.trim()).map(e=>e.match(/^\s*/)[0].length).sort()[0],i=(t>0?n.map(e=>e.substring(t)):n).join("\n");this.parts[e].value=i}}}showDefaultTab(){let{editors:e}=this.parts;""!==this.js?e.value=0:""!==this.html?e.value=1:""!==this.css&&(e.value=2)}render(){super.render(),this.refresh()}}const tO=tM.elementCreator({tag:"live-example"});function tP(e){let t=[...e.querySelectorAll("pre")].filter(e=>["js","html","css","json"].includes(e.innerText.split("\n")[0]));for(let n=0;n<t.length;n++){let i=[t[n]];for(;t[n].nextElementSibling===t[n+1];)i.push(t[n+1]),n+=1;let r=tO();e.insertBefore(r,i[0]),r.initFromElements(i)}}var tI={};n(tI,"MAPSTYLES",()=>tq),n(tI,"MapBox",()=>tH),n(tI,"mapBox",()=>tW);const tq=[{name:"streets",url:"mapbox://styles/mapbox/streets-v10"},{name:"outdoors",url:"mapbox://styles/mapbox/outdoors-v10"},{name:"light",url:"mapbox://styles/mapbox/light-v9"},{name:"dark",url:"mapbox://styles/mapbox/dark-v9"},{name:"satellite",url:"mapbox://styles/mapbox/satellite-v9"},{name:"sateliite + streets",url:"mapbox://styles/mapbox/satellite-streets-v10"},{name:"preview day",url:"mapbox://styles/mapbox/navigation-preview-day-v2"},{name:"preview night",url:"mapbox://styles/mapbox/navigation-preview-night-v2"},{name:"guidance day",url:"mapbox://styles/mapbox/navigation-guidance-day-v2"},{name:"guidance night",url:"mapbox://styles/mapbox/navigation-guidance-night-v2"}],{div:tN}=e$;class tH extends eV{coords="65.01715565258993,25.48081004203459,12";content=tN({style:{width:"100%",height:"100%"}});get map(){return this._map}mapStyle=tq[0];token="";static mapboxCSSAvailable;static mapboxAvailable;_map;styleNode=eV.StyleNode({":host":{display:"inline-block",position:"relative",width:"400px",height:"400px",textAlign:"left"}});constructor(){super(),this.initAttributes("coords","token","mapStyle"),void 0===tH.mapboxCSSAvailable&&(tH.mapboxCSSAvailable=e0("https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.css").catch(e=>{console.error("failed to load mapbox-gl.css",e)}),tH.mapboxAvailable=eG("https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js").catch(e=>{console.error("failed to load mapbox-gl.js",e)}))}connectedCallback(){super.connectedCallback(),this.token||console.error("mapbox requires an access token which you can provide via the token attribute")}render(){if(super.render(),!this.token)return;let{div:e}=this.parts,[t,n,i]=this.coords.split(",").map(e=>Number(e));this.map&&this.map.remove(),tH.mapboxAvailable.then(({mapboxgl:r})=>{console.log("%cmapbox may complain about missing css -- don't panic!","background: orange; color: black; padding: 0 5px;"),r.accessToken=this.token,this._map=new r.Map({container:e,style:this.mapStyle.url,zoom:i,center:[n,t]}),this._map.on("render",()=>this._map.resize())})}}const tW=tH.elementCreator({tag:"map-box"});var tV={};n(tV,"MarkdownViewer",()=>tU),n(tV,"markdownViewer",()=>tQ);var tZ={};!function(e){"use strict";function t(){return(t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=0;function s(e){return"__private_"+r+++"_"+e}function a(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}function o(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(t){e.defaults=t}e.defaults=o();var u=/[&<>"']/,c=RegExp(u.source,"g"),h=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,d=RegExp(h.source,"g"),p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=function(e){return p[e]};function m(e,t){if(t){if(u.test(e))return e.replace(c,f)}else if(h.test(e))return e.replace(d,f);return e}var g=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function b(e){return e.replace(g,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var D=/(^|[^\[])\^/g;function v(e,t){e="string"==typeof e?e:e.source,t=t||"";var n={replace:function(t,i){return i=(i=i.source||i).replace(D,"$1"),e=e.replace(t,i),n},getRegex:function(){return new RegExp(e,t)}};return n}var y=/[^\w:]/g,x=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function w(e,t,n){var i,r,s,a;if(e){try{i=decodeURIComponent(b(n)).replace(y,"").toLowerCase()}catch(e){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!x.test(n)&&(r=t,s=n,k[" "+r]||(C.test(r)?k[" "+r]=r+"/":k[" "+r]=S(r,"/",!0)),a=-1===(r=k[" "+r]).indexOf(":"),n="//"===s.substring(0,2)?a?s:r.replace(A,"$1")+s:"/"!==s.charAt(0)?r+s:a?s:r.replace(E,"$1")+s);try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}var k={},C=/^[^:]+:\/*[^/]*$/,A=/^([^:]+:)[\s\S]*$/,E=/^([^:]+:\/*[^/]*)[\s\S]*$/,F={exec:function(){}};function B(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var i=!1,r=t;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"}).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function S(e,t,n){var i=e.length;if(0===i)return"";for(var r=0;r<i;){var s=e.charAt(i-r-1);if(s!==t||n){if(s!==t&&n)r++;else break}else r++}return e.slice(0,i-r)}function _(e,t,n,i){var r=t.href,s=t.title?m(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){i.state.inLink=!0;var o={type:"link",raw:n,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,o}return{type:"image",raw:n,href:r,title:s,text:m(a)}}var $=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.space=function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}},n.code=function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:S(n,"\n")}}},n.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=i.length?e.slice(i.length):e}).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}},n.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=S(n,"#");this.options.pedantic?n=i.trim():(!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}},n.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},n.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;var r=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:r,text:n}}},n.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,i,r,s,a,o,l,u,c,h,d,p,f=t[1].trim(),m=f.length>1,g={type:"list",raw:"",ordered:m,start:m?+f.slice(0,-1):"",loose:!1,items:[]};f=m?"\\d{1,9}\\"+f.slice(-1):"\\"+f,this.options.pedantic&&(f=m?f:"[*+-]");for(var b=RegExp("^( {0,3}"+f+")((?:[	 ][^\\n]*)?(?:\\n|$))");e&&(p=!1,!(!(t=b.exec(e))||this.rules.block.hr.test(e)));){if(n=t[0],e=e.substring(n.length),u=t[2].split("\n",1)[0].replace(/^\t+/,function(e){return" ".repeat(3*e.length)}),c=e.split("\n",1)[0],this.options.pedantic?(s=2,d=u.trimLeft()):(s=(s=t[2].search(/[^ ]/))>4?1:s,d=u.slice(s),s+=t[1].length),o=!1,!u&&/^ *$/.test(c)&&(n+=c+"\n",e=e.substring(c.length+1),p=!0),!p)for(var D=RegExp("^ {0,"+Math.min(3,s-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))"),v=RegExp("^ {0,"+Math.min(3,s-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),y=RegExp("^ {0,"+Math.min(3,s-1)+"}(?:```|~~~)"),x=RegExp("^ {0,"+Math.min(3,s-1)+"}#");e&&(c=h=e.split("\n",1)[0],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(y.test(c)||x.test(c)||D.test(c)||v.test(e)));){if(c.search(/[^ ]/)>=s||!c.trim())d+="\n"+c.slice(s);else{if(o||u.search(/[^ ]/)>=4||y.test(u)||x.test(u)||v.test(u))break;d+="\n"+c}o||c.trim()||(o=!0),n+=h+"\n",e=e.substring(h.length+1),u=c.slice(s)}!g.loose&&(l?g.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(d))&&(r="[ ] "!==i[0],d=d.replace(/^\[[ xX]\] +/,"")),g.items.push({type:"list_item",raw:n,task:!!i,checked:r,loose:!1,text:d}),g.raw+=n}g.items[g.items.length-1].raw=n.trimRight(),g.items[g.items.length-1].text=d.trimRight(),g.raw=g.raw.trimRight();var w=g.items.length;for(a=0;a<w;a++)if(this.lexer.state.top=!1,g.items[a].tokens=this.lexer.blockTokens(g.items[a].text,[]),!g.loose){var k=g.items[a].tokens.filter(function(e){return"space"===e.type}),C=k.length>0&&k.some(function(e){return/\n.*\n/.test(e.raw)});g.loose=C}if(g.loose)for(a=0;a<w;a++)g.items[a].loose=!0;return g}},n.html=function(e){var t=this.rules.block.html.exec(e);if(t){var n={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var i=this.options.sanitizer?this.options.sanitizer(t[0]):m(t[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}},n.def=function(e){var t=this.rules.block.def.exec(e);if(t){var n=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:r}}},n.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:B(t[1]).map(function(e){return{text:e}}),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,r,s,a,o=n.align.length;for(i=0;i<o;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(i=0,o=n.rows.length;i<o;i++)n.rows[i]=B(n.rows[i],n.header.length).map(function(e){return{text:e}});for(r=0,o=n.header.length;r<o;r++)n.header[r].tokens=this.lexer.inline(n.header[r].text);for(r=0,o=n.rows.length;r<o;r++)for(s=0,a=n.rows[r];s<a.length;s++)a[s].tokens=this.lexer.inline(a[s].text);return n}}},n.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}},n.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}},n.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}},n.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:m(t[1])}},n.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):m(t[0]):t[0]}},n.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=S(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=function(e,t){if(-1===e.indexOf(t[1]))return -1;for(var n=e.length,i=0,r=0;r<n;r++)if("\\"===e[r])r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&--i<0)return r;return -1}(t[2],"()");if(r>-1){var s=(0===t[0].indexOf("!")?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,s).trim(),t[3]=""}}var a=t[2],o="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],o=l[3])}else o=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),_(t,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:o?o.replace(this.rules.inline._escapes,"$1"):o},t[0],this.lexer)}},n.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=t[i.toLowerCase()])){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return _(n,i,n[0],this.lexer)}},n.emStrong=function(e,t,n){void 0===n&&(n="");var i=this.rules.inline.emStrong.lDelim.exec(e);if(i&&!(i[3]&&n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){var r,s,a=i[0].length-1,o=a,l=0,u="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(i=u.exec(t));)if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6]){if(s=r.length,i[3]||i[4]){o+=s;continue}if((i[5]||i[6])&&a%3&&!((a+s)%3)){l+=s;continue}if(!((o-=s)>0)){s=Math.min(s,s+o+l);var c=e.slice(0,a+i.index+s+1);if(Math.min(a,s)%2){var h=c.slice(1,-1);return{type:"em",raw:c,text:h,tokens:this.lexer.inlineTokens(h)}}var d=c.slice(2,-2);return{type:"strong",raw:c,text:d,tokens:this.lexer.inlineTokens(d)}}}}},n.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=m(n,!0),{type:"codespan",raw:t[0],text:n}}},n.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},n.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}},n.autolink=function(e,t){var n,i,r=this.rules.inline.autolink.exec(e);if(r)return i="@"===r[2]?"mailto:"+(n=m(this.options.mangle?t(r[1]):r[1])):n=m(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}},n.url=function(e,t){var n,i,r,s;if(n=this.rules.inline.url.exec(e)){if("@"===n[2])r="mailto:"+(i=m(this.options.mangle?t(n[0]):n[0]));else{do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0])i=m(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}},n.inlineText=function(e,t){var n,i=this.rules.inline.text.exec(e);if(i)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):m(i[0]):i[0]:m(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:n}},t}(),j={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:F,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};j._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,j._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,j.def=v(j.def).replace("label",j._label).replace("title",j._title).getRegex(),j.bullet=/(?:[*+-]|\d{1,9}[.)])/,j.listItemStart=v(/^( *)(bull) */).replace("bull",j.bullet).getRegex(),j.list=v(j.list).replace(/bull/g,j.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+j.def.source+")").getRegex(),j._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",j._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,j.html=v(j.html,"i").replace("comment",j._comment).replace("tag",j._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),j.lheading=v(j.lheading).replace(/bull/g,j.bullet).getRegex(),j.paragraph=v(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex(),j.blockquote=v(j.blockquote).replace("paragraph",j.paragraph).getRegex(),j.normal=t({},j),j.gfm=t({},j.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),j.gfm.table=v(j.gfm.table).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex(),j.gfm.paragraph=v(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",j.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex(),j.pedantic=t({},j.normal,{html:v("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",j._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:F,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:v(j.normal._paragraph).replace("hr",j.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",j.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var T={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:F,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:F,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};function z(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function L(e){var t,n,i="",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}T._punctuation="\\p{P}$+<=>`^|~",T.punctuation=v(T.punctuation,"u").replace(/punctuation/g,T._punctuation).getRegex(),T.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,T.anyPunctuation=/\\[punct]/g,T._escapes=/\\([punct])/g,T._comment=v(j._comment).replace("(?:-->|$)","-->").getRegex(),T.emStrong.lDelim=v(T.emStrong.lDelim,"u").replace(/punct/g,T._punctuation).getRegex(),T.emStrong.rDelimAst=v(T.emStrong.rDelimAst,"gu").replace(/punct/g,T._punctuation).getRegex(),T.emStrong.rDelimUnd=v(T.emStrong.rDelimUnd,"gu").replace(/punct/g,T._punctuation).getRegex(),T.anyPunctuation=v(T.anyPunctuation,"gu").replace(/punct/g,T._punctuation).getRegex(),T._escapes=v(T._escapes,"gu").replace(/punct/g,T._punctuation).getRegex(),T._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,T._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,T.autolink=v(T.autolink).replace("scheme",T._scheme).replace("email",T._email).getRegex(),T._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,T.tag=v(T.tag).replace("comment",T._comment).replace("attribute",T._attribute).getRegex(),T._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,T._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,T._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,T.link=v(T.link).replace("label",T._label).replace("href",T._href).replace("title",T._title).getRegex(),T.reflink=v(T.reflink).replace("label",T._label).replace("ref",j._label).getRegex(),T.nolink=v(T.nolink).replace("ref",j._label).getRegex(),T.reflinkSearch=v(T.reflinkSearch,"g").replace("reflink",T.reflink).replace("nolink",T.nolink).getRegex(),T.normal=t({},T),T.pedantic=t({},T.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:v(/^!?\[(label)\]\((.*?)\)/).replace("label",T._label).getRegex(),reflink:v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",T._label).getRegex()}),T.gfm=t({},T.normal,{escape:v(T.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),T.gfm.url=v(T.gfm.url,"i").replace("email",T.gfm._extended_email).getRegex(),T.breaks=t({},T.gfm,{br:v(T.br).replace("{2,}","*").getRegex(),text:v(T.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var R=function(){function t(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new $,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var n={block:j.normal,inline:T.normal};this.options.pedantic?(n.block=j.pedantic,n.inline=T.pedantic):this.options.gfm&&(n.block=j.gfm,this.options.breaks?n.inline=T.breaks:n.inline=T.gfm),this.tokenizer.rules=n}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var n,i=t.prototype;return i.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},i.blockTokens=function(e,t){var n,i,r,s,a=this;for(void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,function(e,t,n){return t+"    ".repeat(n.length)});e;){var o=function(){if(a.options.extensions&&a.options.extensions.block&&a.options.extensions.block.some(function(i){return!!(n=i.call({lexer:a},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))return"continue";if(n=a.tokenizer.space(e))return e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n),"continue";if(n=a.tokenizer.code(e))return e=e.substring(n.raw.length),(i=t[t.length-1])&&("paragraph"===i.type||"text"===i.type)?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,a.inlineQueue[a.inlineQueue.length-1].src=i.text):t.push(n),"continue";if((n=a.tokenizer.fences(e))||(n=a.tokenizer.heading(e))||(n=a.tokenizer.hr(e))||(n=a.tokenizer.blockquote(e))||(n=a.tokenizer.list(e))||(n=a.tokenizer.html(e)))return e=e.substring(n.raw.length),t.push(n),"continue";if(n=a.tokenizer.def(e))return e=e.substring(n.raw.length),(i=t[t.length-1])&&("paragraph"===i.type||"text"===i.type)?(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,a.inlineQueue[a.inlineQueue.length-1].src=i.text):a.tokens.links[n.tag]||(a.tokens.links[n.tag]={href:n.href,title:n.title}),"continue";if((n=a.tokenizer.table(e))||(n=a.tokenizer.lheading(e)))return e=e.substring(n.raw.length),t.push(n),"continue";if(r=e,a.options.extensions&&a.options.extensions.startBlock){var o,l=1/0,u=e.slice(1);a.options.extensions.startBlock.forEach(function(e){"number"==typeof(o=e.call({lexer:this},u))&&o>=0&&(l=Math.min(l,o))}),l<1/0&&l>=0&&(r=e.substring(0,l+1))}if(a.state.top&&(n=a.tokenizer.paragraph(r)))return i=t[t.length-1],s&&"paragraph"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,a.inlineQueue.pop(),a.inlineQueue[a.inlineQueue.length-1].src=i.text):t.push(n),s=r.length!==e.length,e=e.substring(n.raw.length),"continue";if(n=a.tokenizer.text(e))return e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,a.inlineQueue.pop(),a.inlineQueue[a.inlineQueue.length-1].src=i.text):t.push(n),"continue";if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(a.options.silent)return console.error(c),"break";throw Error(c)}}();if("continue"!==o&&"break"===o)break}return this.state.top=!0,t},i.inline=function(e,t){return void 0===t&&(t=[]),this.inlineQueue.push({src:e,tokens:t}),t},i.inlineTokens=function(e,t){var n,i,r,s,a,o,l=this;void 0===t&&(t=[]);var u=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(u));)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.anyPunctuation.exec(u));)u=u.slice(0,s.index)+"++"+u.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;){var h=function(){if(a||(o=""),a=!1,l.options.extensions&&l.options.extensions.inline&&l.options.extensions.inline.some(function(i){return!!(n=i.call({lexer:l},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))return"continue";if(n=l.tokenizer.escape(e))return e=e.substring(n.raw.length),t.push(n),"continue";if(n=l.tokenizer.tag(e))return e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n),"continue";if(n=l.tokenizer.link(e))return e=e.substring(n.raw.length),t.push(n),"continue";if(n=l.tokenizer.reflink(e,l.tokens.links))return e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n),"continue";if((n=l.tokenizer.emStrong(e,u,o))||(n=l.tokenizer.codespan(e))||(n=l.tokenizer.br(e))||(n=l.tokenizer.del(e))||(n=l.tokenizer.autolink(e,L))||!l.state.inLink&&(n=l.tokenizer.url(e,L)))return e=e.substring(n.raw.length),t.push(n),"continue";if(r=e,l.options.extensions&&l.options.extensions.startInline){var s,c=1/0,h=e.slice(1);l.options.extensions.startInline.forEach(function(e){"number"==typeof(s=e.call({lexer:this},h))&&s>=0&&(c=Math.min(c,s))}),c<1/0&&c>=0&&(r=e.substring(0,c+1))}if(n=l.tokenizer.inlineText(r,z))return e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(o=n.raw.slice(-1)),a=!0,(i=t[t.length-1])&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n),"continue";if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(l.options.silent)return console.error(d),"break";throw Error(d)}}();if("continue"!==h&&"break"===h)break}return t},n=[{key:"rules",get:function(){return{block:j,inline:T}}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i.key),i)}}(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(),M=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.code=function(e,t,n){var i=(t||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,i);null!=r&&r!==e&&(n=!0,e=r)}return(e=e.replace(/\n$/,"")+"\n",i)?'<pre><code class="'+this.options.langPrefix+m(i)+'">'+(n?e:m(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:m(e,!0))+"</code></pre>\n"},n.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.html=function(e,t){return e},n.heading=function(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+(this.options.headerPrefix+i.slug(n))+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},n.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},n.listitem=function(e){return"<li>"+e+"</li>\n"},n.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},n.paragraph=function(e){return"<p>"+e+"</p>\n"},n.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},n.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},n.strong=function(e){return"<strong>"+e+"</strong>"},n.em=function(e){return"<em>"+e+"</em>"},n.codespan=function(e){return"<code>"+e+"</code>"},n.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.del=function(e){return"<del>"+e+"</del>"},n.link=function(e,t,n){if(null===(e=w(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},n.image=function(e,t,n){if(null===(e=w(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},n.text=function(e){return e},t}(),O=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),P=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do n=e+"-"+ ++i;while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),I=function(){function t(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new M,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new O,this.slugger=new P}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var n=t.prototype;return n.parse=function(e,t){void 0===t&&(t=!0);var n,i,r,s,a,o,l,u,c,h,d,p,f,m,g,D,v,y,x,w="",k=e.length;for(n=0;n<k;n++){if(h=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(!1!==(x=this.options.extensions.renderers[h.type].call({parser:this},h))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){w+=x||"";continue}switch(h.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(h.tokens),h.depth,b(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(i=0,u="",l="",s=h.header.length;i<s;i++)l+=this.renderer.tablecell(this.parseInline(h.header[i].tokens),{header:!0,align:h.align[i]});for(u+=this.renderer.tablerow(l),c="",s=h.rows.length,i=0;i<s;i++){for(r=0,o=h.rows[i],l="",a=o.length;r<a;r++)l+=this.renderer.tablecell(this.parseInline(o[r].tokens),{header:!1,align:h.align[r]});c+=this.renderer.tablerow(l)}w+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(h.tokens),w+=this.renderer.blockquote(c);continue;case"list":for(i=0,d=h.ordered,p=h.start,f=h.loose,s=h.items.length,c="";i<s;i++)D=(g=h.items[i]).checked,v=g.task,m="",g.task&&(y=this.renderer.checkbox(D),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=y+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=y+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:y}):m+=y),m+=this.parse(g.tokens,f),c+=this.renderer.listitem(m,v,D);w+=this.renderer.list(c,d,p);continue;case"html":w+=this.renderer.html(h.text,h.block);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(c=h.tokens?this.parseInline(h.tokens):h.text;n+1<k&&"text"===e[n+1].type;)c+="\n"+((h=e[++n]).tokens?this.parseInline(h.tokens):h.text);w+=t?this.renderer.paragraph(c):c;continue;default:var C='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(C);return}throw Error(C)}}return w},n.parseInline=function(e,t){t=t||this.renderer;var n,i,r,s="",a=e.length;for(n=0;n<a;n++){if(i=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]&&(!1!==(r=this.options.extensions.renderers[i.type].call({parser:this},i))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))){s+=r||"";continue}switch(i.type){case"escape":case"text":s+=t.text(i.text);break;case"html":s+=t.html(i.text);break;case"link":s+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case"image":s+=t.image(i.href,i.title,i.text);break;case"strong":s+=t.strong(this.parseInline(i.tokens,t));break;case"em":s+=t.em(this.parseInline(i.tokens,t));break;case"codespan":s+=t.codespan(i.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(i.tokens,t));break;default:var o='Token with "'+i.type+'" type was not found.';if(this.options.silent){console.error(o);return}throw Error(o)}}return s},t}(),q=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.preprocess=function(e){return e},n.postprocess=function(e){return e},t}();q.passThroughHooks=new Set(["preprocess","postprocess"]);var N=s("parseMarkdown"),H=s("onError"),W=function(){function e(){Object.defineProperty(this,H,{value:Z}),Object.defineProperty(this,N,{value:V}),this.defaults=o(),this.options=this.setOptions,this.parse=a(this,N)[N](R.lex,I.parse),this.parseInline=a(this,N)[N](R.lexInline,I.parseInline),this.Parser=I,this.parser=I.parse,this.Renderer=M,this.TextRenderer=O,this.Lexer=R,this.lexer=R.lex,this.Tokenizer=$,this.Slugger=P,this.Hooks=q,this.use.apply(this,arguments)}var n=e.prototype;return n.walkTokens=function(e,t){for(var n,r=this,s=[],a=i(e);!(n=a()).done;)!function(){var e=n.value;switch(s=s.concat(t.call(r,e)),e.type){case"table":for(var a,o=i(e.header);!(a=o()).done;){var l=a.value;s=s.concat(r.walkTokens(l.tokens,t))}for(var u,c=i(e.rows);!(u=c()).done;)for(var h,d=u.value,p=i(d);!(h=p()).done;){var f=h.value;s=s.concat(r.walkTokens(f.tokens,t))}break;case"list":s=s.concat(r.walkTokens(e.items,t));break;default:r.defaults.extensions&&r.defaults.extensions.childTokens&&r.defaults.extensions.childTokens[e.type]?r.defaults.extensions.childTokens[e.type].forEach(function(n){s=s.concat(r.walkTokens(e[n],t))}):e.tokens&&(s=s.concat(r.walkTokens(e.tokens,t)))}}();return s},n.use=function(){for(var e=this,n=this.defaults.extensions||{renderers:{},childTokens:{}},i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return r.forEach(function(i){var r=t({},i);if(r.async=e.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(function(e){if(!e.name)throw Error("extension name required");if(e.renderer){var t=n.renderers[e.name];t?n.renderers[e.name]=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=e.renderer.apply(this,i);return!1===s&&(s=t.apply(this,i)),s}:n.renderers[e.name]=e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}),r.extensions=n),i.renderer){var s=e.defaults.renderer||new M(e.defaults),a=function(e){var t=s[e];s[e]=function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=i.renderer[e].apply(s,r);return!1===o&&(o=t.apply(s,r)),o}};for(var o in i.renderer)a(o);r.renderer=s}if(i.tokenizer){var l=e.defaults.tokenizer||new $(e.defaults),u=function(e){var t=l[e];l[e]=function(){for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=i.tokenizer[e].apply(l,r);return!1===a&&(a=t.apply(l,r)),a}};for(var c in i.tokenizer)u(c);r.tokenizer=l}if(i.hooks){var h=e.defaults.hooks||new q,d=function(t){var n=h[t];q.passThroughHooks.has(t)?h[t]=function(r){if(e.defaults.async)return Promise.resolve(i.hooks[t].call(h,r)).then(function(e){return n.call(h,e)});var s=i.hooks[t].call(h,r);return n.call(h,s)}:h[t]=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];var a=i.hooks[t].apply(h,r);return!1===a&&(a=n.apply(h,r)),a}};for(var p in i.hooks)d(p);r.hooks=h}if(i.walkTokens){var f=e.defaults.walkTokens;r.walkTokens=function(e){var t=[];return t.push(i.walkTokens.call(this,e)),f&&(t=t.concat(f.call(this,e))),t}}e.defaults=t({},e.defaults,r)}),this},n.setOptions=function(e){return this.defaults=t({},this.defaults,e),this},e}();function V(e,n){var i=this;return function(r,s,o){"function"==typeof s&&(o=s,s=null);var l=t({},s);s=t({},i.defaults,l);var u=a(i,H)[H](s.silent,s.async,o);if(null==r)return u(Error("marked(): input parameter is undefined or null"));if("string"!=typeof r)return u(Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(c=s,h=o,c&&!c.silent&&(h&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(c.sanitize||c.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(c.highlight||"language-"!==c.langPrefix)&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),c.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),c.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),c.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),c.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(c.headerIds||c.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`.")),s.hooks&&(s.hooks.options=s),o){var c,h,d,p=s.highlight;try{s.hooks&&(r=s.hooks.preprocess(r)),d=e(r,s)}catch(e){return u(e)}var f=function(e){var t;if(!e)try{s.walkTokens&&i.walkTokens(d,s.walkTokens),t=n(d,s),s.hooks&&(t=s.hooks.postprocess(t))}catch(t){e=t}return s.highlight=p,e?u(e):o(null,t)};if(!p||p.length<3||(delete s.highlight,!d.length))return f();var m=0;return i.walkTokens(d,function(e){"code"===e.type&&(m++,setTimeout(function(){p(e.text,e.lang,function(t,n){if(t)return f(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--m&&f()})},0))}),void(0===m&&f())}if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(function(t){return e(t,s)}).then(function(e){return s.walkTokens?Promise.all(i.walkTokens(e,s.walkTokens)).then(function(){return e}):e}).then(function(e){return n(e,s)}).then(function(e){return s.hooks?s.hooks.postprocess(e):e}).catch(u);try{s.hooks&&(r=s.hooks.preprocess(r));var g=e(r,s);s.walkTokens&&i.walkTokens(g,s.walkTokens);var b=n(g,s);return s.hooks&&(b=s.hooks.postprocess(b)),b}catch(e){return u(e)}}}function Z(e,t,n){return function(i){if(i.message+="\nPlease report this to https://github.com/markedjs/this.",e){var r="<p>An error occurred:</p><pre>"+m(i.message+"",!0)+"</pre>";if(t)return Promise.resolve(r);if(n){n(null,r);return}return r}if(t)return Promise.reject(i);if(n){n(i);return}throw i}}var U=new W(e.defaults);function Q(e,t,n){return U.parse(e,t,n)}Q.options=Q.setOptions=function(e){return U.setOptions(e),Q.defaults=U.defaults,l(Q.defaults),Q},Q.getDefaults=o,Q.defaults=e.defaults,Q.use=function(){return U.use.apply(U,arguments),Q.defaults=U.defaults,l(Q.defaults),Q},Q.walkTokens=function(e,t){return U.walkTokens(e,t)},Q.parseInline=U.parseInline,Q.Parser=I,Q.parser=I.parse,Q.Renderer=M,Q.TextRenderer=O,Q.Lexer=R,Q.lexer=R.lex,Q.Tokenizer=$,Q.Slugger=P,Q.Hooks=q,Q.parse=Q;var Y=Q.options,X=Q.setOptions,J=Q.use,G=Q.walkTokens,K=Q.parseInline,ee=I.parse,et=R.lex;e.Hooks=q,e.Lexer=R,e.Marked=W,e.Parser=I,e.Renderer=M,e.Slugger=P,e.TextRenderer=O,e.Tokenizer=$,e.getDefaults=o,e.lexer=et,e.marked=Q,e.options=Y,e.parse=Q,e.parseInline=K,e.parser=ee,e.setOptions=X,e.use=J,e.walkTokens=G}(tZ);class tU extends eV{src="";value="";content=null;constructor(){super(),this.initAttributes("src")}connectedCallback(){super.connectedCallback(),""!==this.src?(async()=>{let e=await fetch(this.src);this.value=await e.text()})():""===this.value&&(this.value=null!=this.textContent?this.textContent:"")}didRender=()=>{};render(){super.render(),this.innerHTML=(0,tZ.marked)("string"==typeof this.value?this.value:"",{mangle:!1,headerIds:!1}),this.didRender()}}const tQ=tU.elementCreator({tag:"markdown-viewer"});var tY={};n(tY,"blockStyle",()=>t5),n(tY,"spacer",()=>t9),n(tY,"elastic",()=>t6),n(tY,"commandButton",()=>t4),n(tY,"richTextWidgets",()=>nn),n(tY,"RichText",()=>ni),n(tY,"richText",()=>nr);const{style:tX,xinSlot:tJ,div:tG,select:tK,fragment:t0,option:t1,button:t2,span:t3}=e$;document.head.append(tX({id:"rich-text"},`rich-text {
  display: flex;
  flex-direction: column;
  height: 100%;
}
rich-text [part="toolbar"] {
  padding: 4px;
  display: flex;
  gap: 0px;
  flex: 0 0 auto;
  flex-wrap: wrap;
}
`));const t8=[{caption:"Title",tagType:"H1"},{caption:"Heading",tagType:"H2"},{caption:"Subheading",tagType:"H3"},{caption:"Minor heading",tagType:"H4"},{caption:"Body",tagType:"P"},{caption:"Code Block",tagType:"PRE"}];function t5(e=t8){return t0(tK({title:"paragraph style",slot:"toolbar",class:"block-style"},...e.map(({caption:e,tagType:t})=>t1(e,{value:`formatBlock,${t}`}))),t3({class:"icon-chevron-down"}))}function t9(e="10px"){return t3({slot:"toolbar",style:{flex:`0 0 ${e}`,content:" "}})}function t6(e="10px"){return t3({slot:"toolbar",style:{flex:`0 0 ${e}`,content:" "}})}function t4(e,t,n){return t2({slot:"toolbar",dataCommand:t,title:e},t3({class:n}))}const t7=()=>[t4("left-justify","justifyLeft","icon-format_align_left"),t4("center","justifyCenter","icon-format_align_center"),t4("right-justify","justifyRight","icon-format_align_right"),t9(),t4("bullet list","insertUnorderedList","icon-format_list_bulleted"),t4("numbered list","insertOrderedList","icon-format_list_numbered"),t9(),t4("indent","indent","icon-format_indent_increase"),t4("indent","outdent","icon-format_indent_decrease")],ne=()=>[t4("bold","bold","icon-format_bold"),t4("italic","italic","icon-format_italic"),t4("underline","underline","icon-format_underlined")],nt=()=>[t5(),t9(),...ne()],nn=()=>[t5(),t9(),...t7(),t9(),...ne()];class ni extends eV{widgets="default";get value(){return this.parts.doc.innerHTML}set value(e){this.parts.doc.innerHTML=e}blockElement(e){let{doc:t}=this.parts;for(;null!==e.parentElement&&e.parentElement!==t;)e=e.parentElement;return e.parentElement===t?e:void 0}get selectedBlocks(){let{doc:e}=this.parts,t=window.getSelection();if(null===t)return[];let n=[];for(let i=0;i<t.rangeCount;i++){let r=t.getRangeAt(i);if(!e.contains(r.commonAncestorContainer))continue;let s=this.blockElement(r.startContainer),a=this.blockElement(r.endContainer);for(n.push(s);s!==a&&null!==s;)s=s.nextElementSibling,n.push(s)}return n}get selectedText(){let e=window.getSelection();return null===e?"":this.selectedBlocks.length?e.toString():""}selectionChange=(e,t)=>{};content=[tJ({name:"toolbar",part:"toolbar"}),tG({part:"doc",contenteditable:!0,style:{flex:"1 1 auto",outline:"none"}}),tJ({part:"content"})];constructor(){super(),this.initAttributes("widgets")}doCommand(e){if(void 0===e)return;let t=e.split(",");console.log("execCommand",t[0],!1,...t.slice(1)),document.execCommand(t[0],!1,...t.slice(1))}handleSelectChange=e=>{let t=e.target.closest("select");null!=t&&this.doCommand(t.value)};handleButtonClick=e=>{let t=e.target.closest("button");null!=t&&this.doCommand(t.dataset.command)};updateBlockStyle(){let e=this.parts.toolbar.querySelector("select.block-style");if(null===e)return;let t=this.selectedBlocks.map(e=>e.tagName);t=[...new Set(t)],e.value=1===t.length?`formatBlock,${t[0]}`:""}connectedCallback(){super.connectedCallback();let{doc:e,content:t,toolbar:n}=this.parts;""!==t.innerHTML&&""===e.innerHTML&&(e.innerHTML=t.innerHTML,t.innerHTML=""),t.style.display="none",n.addEventListener("click",this.handleButtonClick),n.addEventListener("change",this.handleSelectChange),document.addEventListener("selectionchange",e=>{this.updateBlockStyle(),this.selectionChange(e,this)})}render(){let{toolbar:e}=this.parts;if(super.render(),0===e.children.length)switch(this.widgets){case"minimal":e.append(...nt());break;case"default":e.append(...nn())}}}const nr=ni.elementCreator({tag:"rich-text"});var ns={};n(ns,"SideNav",()=>no),n(ns,"sideNav",()=>nl);const{slot:na}=e$;class no extends eV{minSize=800;navSize=200;compact=!1;content=[na({name:"nav"}),na({part:"content"})];_contentVisible=!1;get contentVisible(){return this._contentVisible}set contentVisible(e){this._contentVisible=e,this.queueRender()}styleNode=eV.StyleNode({":host":{display:"grid",gridTemplateColumns:`${eq.navWidth("50%")} ${eq.contentWidth("50%")}`,gridTemplateRows:"100%",position:"relative",margin:eq.margin("0 0 0 -100%"),transition:eq.sideNavTransition("0.25s ease-out")},":host slot":{position:"relative"},":host slot:not([name])":{display:"block"},':host slot[name="nav"]':{display:"block"}});onResize=()=>{let{content:e}=this.parts;if(null===this.offsetParent)return;let t=void 0===[...this.childNodes].find(e=>!(e instanceof Element)||"nav"!==e.getAttribute("slot"));if(t){this.style.setProperty("--nav-width","100%"),this.style.setProperty("--content-width","0%");return}let n=this.offsetParent;this.compact=n.offsetWidth<this.minSize,this.compact?(e.classList.remove("-side-nav-visible"),this.style.setProperty("--nav-width","50%"),this.style.setProperty("--content-width","50%"),this.contentVisible?this.style.setProperty("--margin","0 0 0 -100%"):this.style.setProperty("--margin","0 -100% 0 0")):(e.classList.add("-side-nav-visible"),this.style.setProperty("--nav-width",`${this.navSize}px`),this.style.setProperty("--content-width",`calc(100% - ${this.navSize}px)`),this.style.setProperty("--margin","0"))};observer;connectedCallback(){super.connectedCallback(),this.contentVisible=0===this.parts.content.childNodes.length,globalThis.addEventListener("resize",this.onResize),this.observer=new MutationObserver(this.onResize),this.observer.observe(this,{childList:!0})}disconnectedCallback(){super.disconnectedCallback(),this.observer.disconnect()}constructor(){super(),this.initAttributes("minSize","navSize","compact")}render(){super.render(),this.onResize()}}const nl=no.elementCreator({tag:"side-nav"});var nu={};n(nu,"SizeBreak",()=>nh),n(nu,"sizeBreak",()=>nd);const{slot:nc}=e$;class nh extends eV{minWidth=0;minHeight=0;value="normal";content=[nc({part:"normal"}),nc({part:"small",name:"small"})];styleNode=eV.StyleNode({":host":{display:"inline-block",position:"relative"}});constructor(){super(),this.initAttributes("minWidth","minHeight")}onResize=()=>{let{normal:e,small:t}=this.parts,n=this.offsetParent;n instanceof HTMLElement&&(n.offsetWidth<this.minWidth||n.offsetHeight<this.minHeight?(e.hidden=!0,t.hidden=!1,this.value="small"):(e.hidden=!1,t.hidden=!0,this.value="normal"))};connectedCallback(){super.connectedCallback(),globalThis.addEventListener("resize",this.onResize)}disconnectedCallback(){super.disconnectedCallback(),globalThis.removeEventListener("resize",this.onResize)}}const nd=nh.elementCreator({tag:"size-break"});function np(e,t=!0){return(n,i)=>{let r=e(n),s=e(i);for(let e in r)if(r[e]!==s[e]){let n=Array.isArray(t)?!1!==t[e]:t;return n?r[e]>s[e]?1:-1:r[e]>s[e]?-1:1}return 0}}i(eY,eX),i(eY,e3),i(eY,e7),i(eY,to),i(eY,tC),i(eY,tI),i(eY,tV),i(eY,tY),i(eY,ns),i(eY,nu),i(eY,tA);var nf={};nf=JSON.parse('[{"text":"# xinjs-ui\\n\\n[ui.xinjs.net live demo](https://ui.xinjs.net) [xinjs](https://xinjs.net) [discord](https://discord.gg/ramJ9rgky5) [github](https://github.com/tonioloewald/xinjs-ui#readme) [npm](https://www.npmjs.com/package/xinjs-ui) <size-break min-width=\\"500\\"><img alt=\\"bundlejs\\" src=\\"https://deno.bundlejs.com/?q=xinjs-ui&badge=\\"></size-break>\\n\\nCopyright \xa92023 Tonio Loewald\\n\\n## the xinjs ui library\\n\\nIn general, `xinjs` strives to work _with_ the browser rather than trying to _replace_ it.\\n\\nIn a similar vein, `xinjs-ui` comprises a collection of [web-components](https://developer.mozilla.org/en-US/docs/Web/API/Web_components)\\nwith the goal of augmenting what _already_ works well, and the components are intended be interoperable as\\nsimilar as possible to things that you already use, such as `<input>` or `<select>` elements.\\nE.g. where appropriate, the `value` of an element is its malleable `state`, and when this changes,\\nthe element emits a `change` event.\\n\\nSimilarly, the xinjs base `Component` class and the components in this collection stive to\\nbe as similar in operation as possible to DOM elements as possible. E.g. binary attributes\\nwork as expected. Adding the `hidden` attribute makes them disappear.\\nIntinsic properties of components will default to `null` rather than `undefined`.\\n\\nSimilarly, because web-components are highly interoperable, there\'s no reason to reinvent\\nwheels. In particular, this library won\'t try to replace existing, excellent libraries\\nsuch as [shoelace.style](https://shoelace.style/) or wrap perfectly functional HTML\\nelements, like the venerable `<input>` or `<form>` elements that are already capable\\nand accessible.\\n\\nThe goal here is to provide useful components and other utilities that add to what\'s built into HTML5 and CSS3.\\n\\n## custom elements\\n\\nThe simplest way to use these elements is to simply import the element and then either\\nuse HTML or the `ElementCreator` function exported.\\n\\nE.g. to use the markdown viewer:\\n\\n```\\nimport { markdownViewer } from \'xinjs-ui\'\\n\\ndocument.append(markdownViewer(`\\n# hello world\\nhere is some markdown\\n`))\\n```\\n\\nAssuming you import the javascript somewhere, this HTML will work as well.\\n\\n```\\n<markdown-viewer>\\n# hello world\\nhere is some markdown\\n</markdown-viewer>\\n```\\n\\nThe big difference with using the `markdownViewer()` function is that the `xinjs` `Component`\\nclass will automatically pick a new tag if the expected tag is taken (e.g. by a previously\\ndefined custom-element from another library). `markdownViewer()` will create an element of\\nthe correct type.\\n\\nThe other thing is that `xinjs` `ElementCreator` functions are convenient and composable,\\nallowing you to build DOM elements with less code than pretty much any other option, including\\nJSX, TSX, or HTML.\\n","filename":"README.md","path":"README.md"},{"text":"# `<bodymovin-player>`\\n\\nA wrapper for AirBnb\'s bodymovin, a.k.a. [lottie](https://airbnb.io/lottie/#/web), player. It\'s designed\\nto work like an `<img>` element (just set its `src` attribute).\\n\\n```html\\n<bodymovin-player \\n  style=\\"height: 160px; width: 160px\\" \\n  src=\\"https://raw.githubusercontent.com/tonioloewald/xinjs-ui/main/demo/88140-rocket-livetrade.json\\"\\n></bodymovin-player>\\n<div>\\n  Animation by <a target=\\"_blank\\" href=\\"https://lottiefiles.com/dvskjbicfc\\">chiến l\xea hồng</a>\\n</div>\\n```\\n```css\\n.preview {\\n  padding: var(--spacing);\\n  text-align: center;\\n}\\n```\\n\\nYou can also directly set its `json` property to the content of a `lottie.json` file.\\n\\nAnd of course just access the element\'s `animation` property to [use the bodymovin API](https://airbnb.io/lottie/#/web).","filename":"bodymovin-player.ts","path":"src/bodymovin-player.ts"},{"text":"# `<code-editor>`\\n\\nSometimes, it\'s nice to be able to just toss a code-editor in a web-page. `<code-editor>` is a thin wrapper around the [ACE Editor](https://ace.c9.io/). \\n\\n`<code-editor>`\'s `value` is the code it contains. Its `mode` attribute sets the language, and you can further configure\\nthe ACE editor instance via its `options` property.\\n\\n```html\\n<code-editor style=\\"width: 100%; height: 190px\\" mode=\\"css\\">\\nbody {\\n  box-sizing: border-box;\\n}\\n</code-editor>\\n```","filename":"code-editor.ts","path":"src/code-editor.ts"},{"text":"# `<data-table>`\\n\\nA virtual data-table, configurable via a `columns` array (which will automatically be generated if not provided),\\nthat displays gigantic tables with fixed headers (and live column-resizing) using a minimum of resources and cpu.\\n\\n```js\\nconst { dataTable } = xinjsui\\nconst { input } = xinjs.elements\\n\\nconst emojiRequest = await fetch(\'https://raw.githubusercontent.com/tonioloewald/emoji-metadata/master/emoji-metadata.json\')\\nconst emojiData = await emojiRequest.json()\\n\\nconst columns = [\\n  {\\n    name: \\"emoji\\",\\n    prop: \\"chars\\",\\n    align: \\"center\\",\\n    width: 80\\n  },\\n  {\\n    prop: \\"name\\",\\n    width: 300,\\n    // custom cell using xinjs bindings to make the field editable\\n    dataCell() {\\n      return input({\\n        class: \'td\',\\n        bindValue: \'^.name\',\\n        title: \'name\',\\n      })\\n    },\\n  },\\n  {\\n    prop: \\"category\\",\\n    width: 150\\n  },\\n  {\\n    prop: \\"subcategory\\",\\n    width: 150\\n  },\\n]\\n\\npreview.append(dataTable({ array: emojiData, columns }))\\n```\\n```css\\n.preview input.td {\\n  margin: 0;\\n  border-radius: 0;\\n  box-shadow: none !important;\\n  background: transparent;\\n}\\n\\n.preview data-table {\\n  height: 100%;\\n}\\n```\\n\\nYou can set the `<data-table>`\'s `array`, `columns`, and `filter` properties directly, or set its `value` to:\\n\\n```\\n{ \\n  array: any[], \\n  columns: ColumnOptions[] | null, \\n  filter?: ArrayFilter \\n}\\n```\\n\\nIf you set the `<data-table>`\'s `rowHeight` to `0` it will render all its elements (i.e. not be virtual). This is\\nuseful for smaller tables, or tables with variable row-heights.","filename":"data-table.ts","path":"src/data-table.ts"},{"text":"# `<filter-builder>`\\n\\nAutomatically creates `ArrayFilter` functions `(a: any[]) => any[]` based on the query you build using its\\nmacOS Finder-inspired interface, using an easily customizable / extensible collection of `Filter` objects.\\n\\n```js\\nconst { dataTable, filterBuilder, availableFilters } = xinjsui\\n\\nconst sourceWords = [\'acorn\', \'bubblegum\', \'copper\', \'daisy\', \'ellipse\', \'fabulous\', \'gerund\', \'hopscotch\', \'idiom\', \'joke\']\\nfunction randomWords () {\\n  let numWords = Math.random() * 4\\n  const words = []\\n  while (numWords > 0) {\\n    numWords -= 1\\n    words.push(sourceWords[Math.floor(Math.random() * 10)])\\n  }\\n  return words\\n}\\n\\nconst array = []\\nfor(let i = 0; i < 1000; i++) {\\n  array.push({\\n    date: new Date(Math.random() * Date.now()).toISOString().split(\'T\')[0],\\n    isLucky: Math.random() < 0.1,\\n    number: Math.floor(Math.random() * 200 - 100),\\n    string: randomWords().join(\' \'),\\n  })\\n}\\n\\nconst columns = [\\n  {\\n    prop: \'date\',\\n    width: 120\\n  },\\n  {\\n    prop: \'isLucky\',\\n    type: \'boolean\',\\n    width: 100\\n  },\\n  {\\n    prop: \'number\',\\n    align: \'right\',\\n    width: 100\\n  },\\n  {\\n    prop: \'string\',\\n    width: 300\\n  },\\n]\\n\\nconst table = dataTable({ array, columns })\\nconst { contains, equals, after, isTrue, isFalse } = availableFilters\\nconst filter = filterBuilder({\\n  filters: { contains, equals, after, isTrue, isFalse },\\n  fields: columns,\\n  onChange(event) {\\n    console.log(filter.filter, filter.description)\\n    table.filter = filter.filter\\n  }\\n})\\npreview.append(filter, table)\\n```\\n```css\\n.preview {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.preview data-table {\\n  flex: 1 1 auto;\\n}\\n```\\n\\n## availableFilters\\n\\n`<filter-builder>` has a default set of `FilterMaker` objects which it uses to construct filter function.\\nIn the example above, the default collection of filters is reduced to `contains`, `equals`, `after`, and `isTrue`.\\n\\nThe full collection includes:\\n\\n- **contains** * looks for fields containing a string (ignoring case)\\n- **equals** * looks for fields containing equivalent values (ignoring case)\\n- **after** * looks for fields with a date after a provided value\\n- **greaterThan** * looks for fields with a value greater than a provided value\\n- **truthy** * looks for fields that are true / non-zero / non-empty\\n- **true** looks for fields that are `true`\\n- **false** looks for fields that are `false`\\n\\n**Note**: the filters marked with an * have negative version (e.g. does not contain).\\n\\n```\\ntype ObjectTest (obj: any) => boolean\\n\\ninterface FilterMaker {\\n  caption: string                                 // describes the test condition\\n  negative?: string                               // describes the negative test condition\\n  needsValue?: boolean                            // if false, the filterMaker doesn\'t need a needle value\\n  filterMaker(needle: any) => ObjectTest          // builds an ObjectTest\\n}\\n```","filename":"filter-builder.ts","path":"src/filter-builder.ts"},{"text":"# `<live-example>`\\n\\n`<live-example>` makes it easy to insert interactive code examples in a web page.\\nIt\'s effectively a super lightweight fiddle based on the `b8rjs`\'s `fiddle` component\\n(which I miss dearly). (You\'re probably looking at it right now.)\\n\\nYou can simply wrap it around a sequence of code blocks in the DOM with the\\nlanguages (js, html, css) as annotations or you can directly set the `js`, `html`,\\nand `css` properties.\\n\\n```css\\n.preview {\\n  padding: 0 var(--spacing);  \\n}\\n\\n.example {\\n  animation: throb ease-in-out 1s infinite alternate;\\n}\\n\\n@keyframes throb {\\n  from { color: blue }\\n  to { color: red }\\n}\\n```\\n```js\\n// this code executes in an async function body\\n// it has xinjs, xinjsui, and preview (the preview div) available as local variables\\nconst { div } = xinjs.elements\\npreview.append(div({class: \'example\'}, \'fiddle de dee!\'))\\n```\\n```html\\n<h2>Example</h2>\\n```\\n\\nA `<live-example>` can be given a `context` object {[key: string]: any}, which is the \\nset of values available in the javascript\'s execution context (it is wrapped in an\\nasync function and passed those values). By default, that context comprises `preview` \\n(the `<div>` in which the example is rendered), `xinjs` (`* from xinjs`), \\nand `xinjsui` (`* from xinjsui`).\\n\\nThe `LiveExample` class provides the static `insertExamples(element: HTMLElement)` \\nfunction that will replace any sequence of \\n`pre code[class=\\"language-html\\"],pre code[class=\\"language-js\\"],pre code[class=\\"language-css\\"]`\\nelements with a `<live-example>` instance.","filename":"live-example.ts","path":"src/live-example.ts"},{"text":"# makeSorter\\n\\nI\'m always confusing myself when writing sort functions, so I wrote `makeSorter()`. It\'s\\ninsanely simple and just works™. It makes writing an array sort callback for anything\\nother than an array of numbers or strings easier.\\n\\nTo create a sort callback that sorts by propA then propB (if propA is tied):\\n```\\nconst sorter = makeSorter(\\n  obj => [obj.propA, obj.propB]\\n)\\n```\\n\\nAs above, but sort descending:\\n```\\nconst sorter = makeSorter(\\n  obj => [obj.propA, obj.propB], \\n  false\\n)\\n```\\n\\nAs above but propA is sorted ascending, propB descending\\n```\\nconst sorter = makeSorter(\\n  obj => [obj.propA, obj.propB], \\n  [true, false]\\n)\\n```\\n\\nInteractive example:\\n\\n```css\\n.preview {\\n  padding: var(--spacing);\\n}\\n```\\n```js\\nconst { select, option, div, ul, li } = xinjs.elements\\nconst { makeSorter } = xinjsui\\n\\nconst people = [\\n  { first: \'Juanita\', last: \'Citizen\', age: 25 },\\n  { first: \'Rebecca\', last: \'Howe\', age: 35 },\\n  { first: \'Jane\', last: \'Doe\', age: 35 },\\n  { first: \'Sam\', last: \'Malone\', age: 40 },\\n  { first: \'Norm\', last: \'Peterson\', age: 38 },\\n]\\n\\nconst sorters = {\\n  firstSort: makeSorter(person => [person.first]),\\n  firstDescSort: makeSorter(person => [person.first], false),\\n  nameSort: makeSorter(person => [person.last, person.first]),\\n  ageFirst: makeSorter(person => [-person.age, person.last]),\\n  ageLast: makeSorter(person => [person.age, person.first], [true, false]),\\n}\\n\\nfunction person({first, last, age}) {\\n  return li(`${first} ${last}, ${age}`)\\n}\\n\\nconst list = ul()\\nsortPicker = select(\\n  option(\'Sort by first\', {value: \'firstSort\'}),\\n  option(\'Sort by first (desc)\', {value: \'firstDescSort\'}),\\n  option(\'Sort by last, first\', {value: \'nameSort\'}),\\n  option(\'Sort by age (desc), first\', {value: \'ageFirst\'}),\\n  option(\'Sort by age, last (desc)\', {value: \'ageLast\'}),\\n  {\\n    onChange: render,\\n    value: \'nameSort\'\\n  },\\n)\\n\\nfunction render () {\\n  list.textContent = \'\'\\n  list.append(...people.sort(sorters[sortPicker.value]).map(person))\\n}\\n\\npreview.append(\\n  sortPicker,\\n  list\\n)\\n\\nrender()\\n```","filename":"make-sorter.ts","path":"src/make-sorter.ts"},{"text":"# `<map-box>`\\n\\nA [mapboxgl](https://docs.mapbox.com/mapbox-gl-js/api/) wrapper.\\n\\n```html\\n<!-- please don\'t abuse my mapbox token -->\\n<map-box \\n  style=\\"width: 100%; height: 100%\\"\\n  coords=\\"21.4389,-158.0001,9\\"\\n  token=\\"pk.eyJ1IjoicG9kcGVyc29uIiwiYSI6ImNqc2JlbWU0bjA1ZmY0YW5ycHZod3VhbWcifQ.arvqfpOqMgFYkKgQ35UScA\\"\\n></map-box>\\n```\\n\\nThere\'s no need to learn new APIs or write wrappers, just access the element\'s `map` property \\nand [use the standard mapbox APIs directly](https://docs.mapbox.com/).","filename":"mapbox.ts","path":"src/mapbox.ts"},{"text":"# `<markdown-viewer>`\\n\\nRender [markdown](https://www.markdownguide.org/) anywhere, either using the `src` attribute to load\\nthe file asynchronously, or just put the text inside it. Powered by [marked](https://www.npmjs.com/package/marked).\\n\\n```\\n<markdown-viewer src=\\"/path/to/file.md\\">\\n```\\n\\nAnd you can set the `<markdown-viewer>` element\'s `value` directly, or:\\n\\n```html\\n<markdown-viewer>\\n## hello\\nworld\\n</markdown-viewer>\\n```\\n```css\\nmarkdown-viewer {\\n  display: block;\\n  padding: var(--spacing);\\n}\\n```\\n\\nAnd just set the element\'s `value` and it will render it for you.","filename":"markdown-viewer.ts","path":"src/markdown-viewer.ts"},{"text":"# `<rich-text>`\\n\\nA simple and easily extensible `document.execCommand` WYSIWYG editor with some conveniences.\\n\\nBy default, it treats its initial contents as its document, but you can also set (and get)\\nits `value`.\\n\\n```html\\n<rich-text widgets=\\"minimal\\">\\n<h3>Heading</h3>\\n<p>And some <b>text</b></p>\\n</rich-text>\\n```\\n\\nIt has a `toolbar` slot (actually a xin-slot because it doesn\'t use the shadowDOM).\\n\\nIf you set the `widgets` attribute to `default` or `minimal` you will get a toolbar\\nfor free. Or you can add your own custom widgets.\\n\\nA number of convenience functions available, including:\\n\\n- `commandButton(title: string, command: string, iconClass: string)`\\n- `blockStyle(options: Array<{caption: string, tagType: string}>)`\\n- `spacer(width = \'10px\')`\\n- `elastic(width = \'10px\')`\\n\\nThese each create a toolbar widget. A `blockStyle`-generated `<select>` element will\\nautomatically have its value changed based on the current selection.\\n\\nThe `<rich-text>` component provides `selectedText` and `selectedBlocks` properties, allowing\\nyou to easily perform operations on text selections, and a `selectionChange` callback (which\\nsimply passes through document `selectionchange` events, but also passes a reference to\\nthe `<rich-text>` component).","filename":"rich-text.ts","path":"src/rich-text.ts"},{"text":"# `<side-nav>`\\n\\nThe default layout for iOS / iPadOS apps is to hide the sidebar when displaying content on small\\nscreens, and display the sidebar when space is available (with the user able to explicitly hide\\nthe sidebar if so desired). `<side-nav>` provides this functionality.\\n\\n`<side-nav>` is used to handle the layout of the documentation tab panel.","filename":"side-nav.ts","path":"src/side-nav.ts"},{"text":"# `<size-break>`\\n\\nWhile we wait for enough browsers to implement [container-queries](https://www.w3.org/TR/css-contain-3/),\\nand in any event when you simply want to do different things at different sizes (e.g. in the project I\'m\\nworking on right now, a row of buttons turns into a menu at narrow widths) there\'s `<size-break>`.\\n\\nNote that the sizes referred to are of the `<size-break>`\'s `.offsetParent`, and it watches for\\nthe window\'s `resize` events and its own (via `ResizeObserver`).\\n\\n```html\\n<div class=\\"container\\">\\n  <size-break min-width=\\"150\\" min-height=\\"80\\">\\n    <h1>BIG!</h1>\\n    <i slot=\\"small\\">little</i>\\n  </size-break>\\n  <div class=\\"sizer\\"></div>\\n</div>\\n```\\n```css\\n.preview {\\n  touch-action: none;\\n}\\n\\n.preview size-break {\\n  width: 100%;\\n  height: 100%;\\n  background: #fff8;\\n  border: 1px solid #aaa;\\n}\\n\\n.container {\\n  position: relative;\\n  min-width: 100px;\\n  min-height: 40px;\\n  max-height: 200px;\\n  width: 400px;\\n  height: 100px;\\n}\\n\\n.sizer {\\n  position: absolute;\\n  width: 20px;\\n  height: 20px;\\n  background: #0003;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n}\\n```\\n```js\\nconst { trackDrag } = xinjsui\\n\\nconst container = preview.querySelector(\'.container\')\\nconst sizer = preview.querySelector(\'.sizer\')\\n\\nfunction resize(event) {\\n  const w = container.offsetWidth\\n  const h = container.offsetHeight\\n  trackDrag(event, (dx, dy, event) => {\\n    container.style.width = (w + dx) + \'px\'\\n    container.style.height = (h + dy) + \'px\'\\n    return event.type === \'mouseup\'\\n  }, \'nwse-resize\')\\n}\\n\\nsizer.addEventListener(\'mousedown\', resize, \'nwse-resize\')\\nsizer.addEventListener(\'touchstart\', resize, \'nwse-resize\')\\n```\\n\\n`<size-break>` supports both `min-width` and/or `min-height`, and you can of course target only one\\nof the slots if you like. The demo site uses them to hide the [bundlejs](https://bundlejs.com/) badge when\\nspace is tight.","filename":"size-break.ts","path":"src/size-break.ts"},{"text":"# `<tab-selector>`\\n\\n`<tab-selector>` creates a `tabpanel` for its children, creating a `tab` for each based on its\\n`name` attribute.\\n\\n```html\\n<tab-selector>\\n  <div name=\\"first\\">first body</div>\\n  <div name=\\"second\\">second body</div>\\n  <div name=\\"third\\">third body</div>\\n</tab-selector>\\n```\\n```css\\n  tab-selector {\\n    height: 100%;\\n  }\\n  \\n  div[name] {\\n    padding: 20px;\\n    text-align: center;\\n    height: 100%;\\n    font-size: 200%;\\n  }\\n```\\n```js\\n[...preview.querySelectorAll(\'div[name]\')].forEach(div => {\\n  div.style.color = `hsl(${(Math.random() * 360).toFixed(0)} 50% 50%)`\\n})\\n```\\n\\nUsage:\\n\\n`TabSelector` is the class and `tabSelector` is the `ElementCreator`. So the three methods\\nof creating a `<tab-selector>` are:\\n\\n1. importing `TabSelector` and inserting the appropriate HTML: `<tab-selector>`.\\n2. using `new TabSelector()` and appending it to the DOM.\\n3. using `tabSelector()` and appending it to the DOM. This last is more convenient because\\n   `ElementCreator` allows composition, convenient assignment of properties and attributes,\\n   and so forth.","filename":"tab-selector.ts","path":"src/tab-selector.ts"},{"text":"# trackDrag\\n\\nSometimes you want to track a mouse-drag or touch-drag operation without messing around.\\nThis is how the resizeable columns in `<data-table>` work.\\n\\nJust call `trackDrag(event, (dx, dy, event) => { ... })` and you\'ll get updates on corresponding events until\\nyou return `true` from the event-handler (or, in the case of `touch` events, the last `touch` ends).\\nFor mouse events, a \\"tracker\\" element is thrown up in front of everything for the event.\\n\\n```html\\n<p>\\n  Try dragging the squares…<br>\\n  (You can drag them separately with multi-touch!)\\n</p>\\n<div class=\\"draggable\\" style=\\"top: 20px; left: 40px; background: #f008\\"></div>\\n<div class=\\"draggable\\" style=\\"left: 40%; bottom: 30%; background: #0f08\\"></div>\\n<div class=\\"draggable\\" style=\\"bottom: 30px; right: 10px; background: #00f8\\"></div>\\n```\\n```css\\n.preview {\\n  touch-action: none;\\n}\\n\\n.draggable {\\n  content: \' \';\\n  position: absolute;\\n  width: 50px;\\n  height: 50px;\\n  cursor: move;\\n}\\n\\n.preview p {\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translateX(-50%) translateY(-50%);\\n}\\n```\\n```js\\nconst { trackDrag } = xinjsui\\n\\nfunction dragItem(event) {\\n  const draggable = event.target\\n  if (draggable.classList.contains(\'draggable\')) {\\n    const x = draggable.offsetLeft\\n    const y = draggable.offsetTop\\n    trackDrag(event, (dx, dy, event) => {\\n      draggable.style.left = (x + dx) + \'px\'\\n      draggable.style.top = (y + dy) + \'px\'\\n      draggable.style.bottom = \'auto\'\\n      draggable.style.right = \'auto\'\\n      return event.type === \'mouseup\'\\n    })\\n  }\\n}\\n\\npreview.addEventListener(\'mousedown\', dragItem )\\npreview.addEventListener(\'touchstart\', dragItem, { passive: true } )\\n```\\n\\nFor `touch` events, `dx` and `dy` are based on tracking `event.changedTouches[0]` which\\nis almost certainly what you want.\\n\\nTo handle multi-touch gestures you will need to track the touches yourself.","filename":"track-drag.ts","path":"src/track-drag.ts"},{"text":"# scriptTag & styleSheet\\n\\n## scriptTag\\n\\nIf you need to load an old school (cjs) javascript library via cdn (both mapboxgl and bodymovin are\\nfine examples) then use these two functions. They return promises that resolve `globalThis` when the\\nmodule in question has loaded and otherwise behave as much like aync `import()` as possible.\\n\\nUsing `scriptTag`:\\n\\n```html\\n<canvas></canvas>\\n```\\n```css\\ncanvas {\\n  width: 100%;\\n  height: 100%;\\n}\\n```\\n```js\\nconst { scriptTag } = xinjsui\\n\\n// Note that the current version of Chart.js is an ES6 module so you could just use `import()` instead\\nconst { Chart } = await scriptTag(\'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js\')\\nconst data = {\\n  labels: [\'first\', \'second\', \'third\'],\\n  datasets: [\\n    {\\n      label: \'amazingness\',\\n      backgroundColor: \'#fff4\',\\n      borderColor: \'#f008\',\\n      borderWidth: 2,\\n      data: [21, 27, 57]\\n    }\\n  ]\\n}\\nconst options = {\\n  scales: {\\n    yAxes:[{\\n      stacked:true,\\n      gridLines: {\\n        display:true,\\n        color: \'#00f2\'\\n      }\\n    }],\\n    xAxes:[{\\n      gridLines: {\\n        display:false\\n      }\\n    }]\\n  }\\n}\\n\\nChart.Bar(preview.querySelector(\'canvas\'), {data, options})\\n```\\n\\nNote that `scriptTag` will resolve `globalThis` so it behaves as much like async `import()`\\nas possible.\\n\\nAs an aside:\\n\\n`<bodymovin-player>` is implemented in such a way that if you\'ve preloaded the module\\n(e.g. via a script tag or packaging) it won\'t load it again, which affords offline\\nuse.\\n\\nThere\'s no point for `<map-box>` since it won\'t work without connectivity anyway.\\n\\n## styleSheet\\n\\nstyleSheet creates a `<link>` tag for a specified css file.\\n\\nUsing `styleSheet`:\\n\\n    styleSheet(\'../path/to/style.css\')\\n\\nThis is awaitable, if you care. The stylesheet `<link>` will only be inserted _once_.","filename":"via-tag.ts","path":"src/via-tag.ts"}]'),console.log("welcome to %cui.xinjs.net",`color: ${getComputedStyle(document.body).getPropertyValue("--brand-color")}; padding: 0 5px;`);const nm="xinjs-ui",ng=""!==document.location.search?document.location.search.substring(1):"README.md",nb=t(nf).find(e=>e.filename===ng)||t(nf)[0],{app:nD}=eQ({app:{title:nm,githubUrl:`https://github.com/tonioloewald/${nm}#readme`,npmUrl:`https://www.npmjs.com/package/${nm}`,xinjsUrl:"https://xinjs.net",bundleUrl:`https://deno.bundlejs.com/?q=${nm}&badge=`,optimizeLottie:!1,lottieFilename:"",lottieData:"",docs:t(nf),currentDoc:nb}});ev.docLink={toDOM(e,t){e.setAttribute("href",`?${t}`)}},ev.current={toDOM(e,t){let n=e.getAttribute("href")||"";e.classList.toggle("current",t===n.substring(1))}},Object.assign(globalThis,{app:nD,xin:J,bindings:ev,elements:e$,vars:eI,touch:E});const nv=document.querySelector("main"),{h2:ny,div:nx,span:nw,a:nk,img:nC,header:nA,button:nE,template:nF}=e$;nv.append(nA(ny({bindText:"app.title"}),nw({class:"elastic"}),nd({minWidth:500,style:{marginRight:eI.spacing,display:"flex"}},nC({alt:"bundlejs size badge",src:nD.bundleUrl}),nw({slot:"small"})),nk({class:"iconic"},nw({class:"icon-github",title:"github"}),{href:nD.githubUrl}),nk({class:"iconic"},nw({class:"icon-npm",title:"npmjs"}),{href:nD.npmUrl})),nl({name:"Documentation",navSize:200,minSize:600},nx({slot:"nav",style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",background:eI.navBg,overflowY:"scroll"},bindList:{value:nD.docs}},nF(nk({class:"doc-link",bindText:"^.filename",bindCurrent:"app.currentDoc.filename",bindDocLink:"^.filename",onClick(e){let t=e.target,n=v(e.target),i=e.target.closest("side-nav");i.contentVisible=!0;let{href:r}=t;window.history.pushState({href:r},"",r),nD.currentDoc=n,e.preventDefault()}}))),nx({style:{position:"relative",overflowY:"scroll",height:"100%"}},nE({class:"transparent close-nav show-within-compact",style:{marginTop:"2px",position:"fixed"},onClick(e){e.target.closest("side-nav").contentVisible=!1}},nw({class:"icon-chevron-left"})),tQ({style:{display:"block",maxWidth:"44em",margin:"auto",padding:"0 1em"},bindValue:"app.currentDoc.text",didRender(){tM.insertExamples(this)}}))));
//# sourceMappingURL=index.6d903cd5.js.map
